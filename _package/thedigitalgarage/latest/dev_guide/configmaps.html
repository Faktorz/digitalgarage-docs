<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Digital Garage | Developer Guide | ConfigMaps</title>
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/subdomain.css" rel="stylesheet" type="text/css">
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/docs.css" rel="stylesheet" type="text/css"/>
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <!--
  <link href="https://raw.githubusercontent.com/thedigitalgarage/origin-web-console/master/extensions/thedigitalgarage/css/main.css" rel="stylesheet" type="text/css">
  -->
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/images/favicon.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/images/favicon.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="Digital Garage Documentation" name="application-name">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84210257-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
  <div class="navbar navbar-default navbar-digital-garage" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand digital-garage" href="/"></a>
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../welcome/index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">Digital Garage Discovery</a>
      </li>
      <li class="hidden-xs active">
        <a href="../dev_guide/index.html">Developer Guide</a>
      </li>
      
      <li class="hidden-xs active">
        ConfigMaps
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          
<script>
  (function() {
    var cx = '013769182564158614814:e-dp46b51vk';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../getting_started/basic_walkthrough.html">Basic Walkthrough</a></li>
            <li><a class="" href="../getting_started/beyond_the_basics.html">Beyond the Basics</a></li>
            <li><a class="" href="../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../getting_started/developers_cli.html">Command-Line Walkthrough</a></li>
            <li><a class="" href="../getting_started/devpreview_faq.html">Developer Preview FAQ</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-1">
                <span id="sgSpan-2-1" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-2-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/core_concepts/index.html">Overview</a></li>

                  <li><a class="" href="../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>

                  <li><a class="" href="../architecture/core_concepts/containers_and_images.html">Images</a></li>

                  <li><a class="" href="../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>

                  <li><a class="" href="../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>

                  <li><a class="" href="../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>

                  <li><a class="" href="../architecture/core_concepts/deployments.html">Deployments</a></li>

                  <li><a class="" href="../architecture/core_concepts/routes.html">Routes</a></li>

                  <li><a class="" href="../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-2">
                <span id="sgSpan-2-2" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-2-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/additional_concepts/overview.html">Overview</a></li>

                  <li><a class="" href="../architecture/additional_concepts/networking.html">Networking</a></li>

                  <li><a class="" href="../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>

                  <li><a class="" href="../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>

                  <li><a class="" href="../architecture/additional_concepts/scm.html">Source Control Management</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../cli_reference/cli_by_example_content.html">CLI by example</a></li>
            <li><a class="" href="../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
            <li><a class="" href="../cli_reference/basic_cli_operations.html">Developer CLI Operations</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Developer Guide
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-5">
                <span id="sgSpan-4-5" class="fa fa-caret-right"></span>&nbsp;Migrating Applications
              </a>
              <ul id="topicSubGroup-4-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../dev_guide/migrating_applications/index.html">Overview</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/database_applications.html">Database Applications</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/web_framework_applications.html">Web Framework Applications</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/quickstart_examples.html">QuickStart Examples</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/continuous_integration_and_deployment.html">Continuous Integration and Deployment</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/web_hooks_action_hooks.html">Webhooks and Action Hooks</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/S2I_tool.html">S2I Tool</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/support_guide.html">Support Guide</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-6">
                <span id="sgSpan-4-6" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-4-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../dev_guide/app_tutorials/index.html">Overview</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/maven_tutorial.html">Setting Up a Nexus Mirror</a></li>
              </ul>
            </li>
            <li><a class="" href="../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../dev_guide/secrets.html">Secrets</a></li>
            <li><a class=" active" href="../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../dev_guide/pod_disruption_budget.html">Pod Disruption Budget</a></li>
            <li><a class="" href="../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../dev_guide/jobs.html">Jobs</a></li>
            <li><a class="" href="../dev_guide/scheduled_jobs.html">Scheduled Jobs</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../creating_images/custom.html">Custom Builder</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>Using Images
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../using_images/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-1">
                <span id="sgSpan-6-1" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-6-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/s2i_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/s2i_images/customizing_s2i_images.html">Customizing S2I images</a></li>

                  <li><a class="" href="../using_images/s2i_images/nodejs.html">Node.js</a></li>

                  <li><a class="" href="../using_images/s2i_images/perl.html">Perl</a></li>

                  <li><a class="" href="../using_images/s2i_images/php.html">PHP</a></li>

                  <li><a class="" href="../using_images/s2i_images/python.html">Python</a></li>

                  <li><a class="" href="../using_images/s2i_images/ruby.html">Ruby</a></li>

                  <li><a class="" href="../using_images/s2i_images/java.html">Java</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-2">
                <span id="sgSpan-6-2" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-6-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/db_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/db_images/mysql.html">MySQL</a></li>

                  <li><a class="" href="../using_images/db_images/postgresql.html">PostgreSQL</a></li>

                  <li><a class="" href="../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-3">
                <span id="sgSpan-6-3" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-6-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-4">
                <span id="sgSpan-6-4" class="fa fa-caret-right"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-6-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/other_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/other_images/jenkins.html">Jenkins</a></li>

                  <li><a class="" href="../using_images/other_images/wordpress.html">Wordpress</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-5">
                <span id="sgSpan-6-5" class="fa fa-caret-right"></span>&nbsp;xPaaS Middleware Images
              </a>
              <ul id="topicSubGroup-6-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/xpaas_images/index.html">Overview</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>ConfigMaps</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#creating-configmaps">Creating ConfigMaps</a>
<ul class="sectlevel2">
<li><a href="#configmaps-creating-from-directories">Creating from Directories</a></li>
<li><a href="#configmaps-creating-from-files">Creating from Files</a></li>
<li><a href="#configmaps-creating-from-literal-values">Creating from Literal Values</a></li>
</ul>
</li>
<li><a href="#consuming-configmap-in-pods">Use Cases: Consuming ConfigMaps in Pods</a>
<ul class="sectlevel2">
<li><a href="#configmaps-use-case-consuming-in-env-vars">Consuming in Environment Variables</a></li>
<li><a href="#configmaps-use-case-setting-command-line-arguments">Setting Command-line Arguments</a></li>
<li><a href="#configmaps-use-case-consuming-in-volumes">Consuming in Volumes</a></li>
</ul>
</li>
<li><a href="#configmaps-example-configuring-redis">Example: Configuring Redis</a></li>
<li><a href="#configmaps-restrictions">Restrictions</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many applications require configuration using some combination of configuration
files, command line arguments, and environment variables. These configuration
artifacts should be decoupled from image content in order to keep containerized
applications portable.</p>
</div>
<div class="paragraph">
<p>The <code><strong>ConfigMap</strong></code> object provides mechanisms to inject containers with
configuration data while keeping containers agnostic of Digital Garage. A
<code><strong>ConfigMap</strong></code> can be used to store fine-grained information like individual
properties or coarse-grained information like entire configuration files or JSON
blobs.</p>
</div>
<div class="paragraph">
<p>The <code><strong>ConfigMap</strong></code> API object holds key-value pairs of configuration data that
can be consumed in pods or used to store configuration data for system
components such as controllers. <code><strong>ConfigMap</strong></code> is similar to
<a href="../dev_guide/secrets.html#dev-guide-secrets">secrets</a>, but designed to more conveniently
support working with strings that do not contain sensitive information.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. ConfigMap Object Definition</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ConfigMap</span></span>
<span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">creationTimestamp</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">2016-02-18T19:14:38Z</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-config</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">data</span>: <i class="conum" data-value="1"></i><b>(1)</b>
  <span style="color:#606">example.property.1</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">hello</span></span>
  <span style="color:#606">example.property.2</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">world</span></span>
  <span style="color:#606">example.property.file</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|-</span><span style="color:#D20">
    property.1=value-1
    property.2=value-2
    property.3=value-3</span></span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Contains the configuration data.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Configuration data can be consumed in pods in a variety of ways. A <code><strong>ConfigMap</strong></code>
can be used to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Populate the value of environment variables.</p>
</li>
<li>
<p>Set command-line arguments in a container.</p>
</li>
<li>
<p>Populate configuration files in a volume.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both users and system components may store configuration data in a
<code><strong>ConfigMap</strong></code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-configmaps"><a class="anchor" href="#creating-configmaps"></a>Creating ConfigMaps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the following command to create a <code><strong>ConfigMap</strong></code> easily from
directories, specific files, or literal values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap &lt;configmap_name&gt; [options]</pre>
</div>
</div>
<div class="paragraph">
<p>The following sections cover the different ways you can create a <code><strong>ConfigMap</strong></code>.</p>
</div>
<div class="sect2">
<h3 id="configmaps-creating-from-directories"><a class="anchor" href="#configmaps-creating-from-directories"></a>Creating from Directories</h3>
<div class="paragraph">
<p>Consider a directory with some files that already contain the data with which
you want to populate a <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ ls example-files
game.properties
ui.properties

$ cat example-files/game.properties
enemies=aliens
lives=3
enemies.cheat=true
enemies.cheat.level=noGoodRotten
secret.code.passphrase=UUDDLRLRBABAS
secret.code.allowed=true
secret.code.lives=30

$ cat example-files/ui.properties
color.good=purple
color.bad=yellow
allow.textmode=true
how.nice.to.look=fairlyNice</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the following command to create a <code><strong>ConfigMap</strong></code> holding the content
of each file in this directory:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap game-config \
    --from-file=example-files/</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When the <code>--from-file</code> option points to a directory, each file directly in that
directory is used to populate a key in the <code><strong>ConfigMap</strong></code>, where the name of the
key is the file name, and the value of the key is the content of the file.</p>
</div>
<div class="paragraph">
<p>For example, the above command creates the following <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc describe configmaps game-config
Name:           game-config
Namespace:      default
Labels:         &lt;none&gt;
Annotations:    &lt;none&gt;

Data

game.properties:        121 bytes
ui.properties:          83 bytes</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can see the two keys in the map are created from the file names in the
directory specified in the command. Because the content of those keys may be
large, the output of <code>oc describe</code> only shows the names of the keys and their
sizes.</p>
</div>
<div class="paragraph">
<p>If you want to see the values of the keys, you can <code>oc get</code> the object with the
<code>-o</code> option:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc get configmaps game-config -o yaml

apiVersion: v1
data:
  game.properties: |-
    enemies=aliens
    lives=3
    enemies.cheat=true
    enemies.cheat.level=noGoodRotten
    secret.code.passphrase=UUDDLRLRBABAS
    secret.code.allowed=true
    secret.code.lives=30
  ui.properties: |
    color.good=purple
    color.bad=yellow
    allow.textmode=true
    how.nice.to.look=fairlyNice
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T18:34:05Z
  name: game-config
  namespace: default
  resourceVersion: "407"-
  selflink: /api/v1/namespaces/default/configmaps/game-config
  uid: 30944725-d66e-11e5-8cd0-68f728db1985</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configmaps-creating-from-files"><a class="anchor" href="#configmaps-creating-from-files"></a>Creating from Files</h3>
<div class="paragraph">
<p>You can also pass the <code>--from-file</code> option with a specific file, and pass it
multiple times to the CLI. The following yields equivalent results to the
<a href="#configmaps-creating-from-directories">Creating from Directories</a> example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code><strong>ConfigMap</strong></code> specifying a specific file:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap game-config-2 \
    --from-file=example-files/game.properties \
    --from-file=example-files/ui.properties</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Verify the results:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc get configmaps game-config-2 -o yaml

apiVersion: v1
data:
  game.properties: |-
    enemies=aliens
    lives=3
    enemies.cheat=true
    enemies.cheat.level=noGoodRotten
    secret.code.passphrase=UUDDLRLRBABAS
    secret.code.allowed=true
    secret.code.lives=30
  ui.properties: |
    color.good=purple
    color.bad=yellow
    allow.textmode=true
    how.nice.to.look=fairlyNice
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T18:52:05Z
  name: game-config-2
  namespace: default
  resourceVersion: "516"
  selflink: /api/v1/namespaces/default/configmaps/game-config-2
  uid: b4952dc3-d670-11e5-8cd0-68f728db1985</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also set the key to use for an individual file with the <code>--from-file</code>
option by passing an expression of <code>key=value</code>. For example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code><strong>ConfigMap</strong></code> specifying a key-value pair:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap game-config-3 \
    --from-file=game-special-key=example-files/game.properties</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Verify the results:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc get configmaps game-config-3 -o yaml

apiVersion: v1
data:
  game-special-key: |-
    enemies=aliens
    lives=3
    enemies.cheat=true
    enemies.cheat.level=noGoodRotten
    secret.code.passphrase=UUDDLRLRBABAS
    secret.code.allowed=true
    secret.code.lives=30
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T18:54:22Z
  name: game-config-3
  namespace: default
  resourceVersion: "530"
  selflink: /api/v1/namespaces/default/configmaps/game-config-3
  uid: 05f8da22-d671-11e5-8cd0-68f728db1985</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configmaps-creating-from-literal-values"><a class="anchor" href="#configmaps-creating-from-literal-values"></a>Creating from Literal Values</h3>
<div class="paragraph">
<p>You can also supply literal values for a <code><strong>ConfigMap</strong></code>. The <code>--from-literal</code>
option takes a <code>key=value</code> syntax that allows literal values to be supplied
directly on the command line:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code><strong>ConfigMap</strong></code> specifying a specific file:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap special-config \
    --from-literal=special.how=very \
    --from-literal=special.type=charm</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Verify the results:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc get configmaps special-config -o yaml

apiVersion: v1
data:
  special.how: very
  special.type: charm
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T19:14:38Z
  name: special-config
  namespace: default
  resourceVersion: "651"
  selflink: /api/v1/namespaces/default/configmaps/special-config
  uid: dadce046-d673-11e5-8cd0-68f728db1985</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="consuming-configmap-in-pods"><a class="anchor" href="#consuming-configmap-in-pods"></a>Use Cases: Consuming ConfigMaps in Pods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections describe some uses cases when consuming <code><strong>ConfigMap</strong></code>
objects in pods.</p>
</div>
<div class="sect2">
<h3 id="configmaps-use-case-consuming-in-env-vars"><a class="anchor" href="#configmaps-use-case-consuming-in-env-vars"></a>Consuming in Environment Variables</h3>
<div class="paragraph">
<p>A <code><strong>ConfigMap</strong></code> can be used to populate the value of command line arguments. For
example, consider the following <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ConfigMap</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">data</span>:
  <span style="color:#606">special.how</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">very</span></span>
  <span style="color:#606">special.type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">charm</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can consume the keys of this <code><strong>ConfigMap</strong></code> in a pod using
<code><strong>configMapKeyRef</strong></code> sections:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dapi-test-pod</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: test-container</span></span>
      <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">gcr.io/google_containers/busybox</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[ &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;env&quot; ]</span></span>
      <span style="color:#606">env</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: SPECIAL_LEVEL_KEY</span></span>
          <span style="color:#606">valueFrom</span>:
            <span style="color:#606">configMapKeyRef</span>:
              <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
              <span style="color:#606">key</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special.how</span></span>
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: SPECIAL_TYPE_KEY</span></span>
          <span style="color:#606">valueFrom</span>:
            <span style="color:#606">configMapKeyRef</span>:
              <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
              <span style="color:#606">key</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special.type</span></span>
  <span style="color:#606">restartPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Never</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When this pod is run, its output will include the following lines:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>SPECIAL_LEVEL_KEY=very
SPECIAL_TYPE_KEY=charm</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configmaps-use-case-setting-command-line-arguments"><a class="anchor" href="#configmaps-use-case-setting-command-line-arguments"></a>Setting Command-line Arguments</h3>
<div class="paragraph">
<p>A <code><strong>ConfigMap</strong></code> can also be used to set the value of the command or arguments in
a container. This is accomplished using the Kubernetes substitution syntax
<code>$(VAR_NAME)</code>. Consider the following <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ConfigMap</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">data</span>:
  <span style="color:#606">special.how</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">very</span></span>
  <span style="color:#606">special.type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">charm</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To inject values into the command line, you must consume the keys you want to
use as environment variables, as in the
<a href="#configmaps-use-case-consuming-in-env-vars">Consuming in Environment
Variables</a> use case. Then you can refer to them in a container&#8217;s command using
the <code>$(VAR_NAME)</code> syntax.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dapi-test-pod</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: test-container</span></span>
      <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">gcr.io/google_containers/busybox</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[ &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo $(SPECIAL_LEVEL_KEY) $(SPECIAL_TYPE_KEY)&quot; ]</span></span>
      <span style="color:#606">env</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: SPECIAL_LEVEL_KEY</span></span>
          <span style="color:#606">valueFrom</span>:
            <span style="color:#606">configMapKeyRef</span>:
              <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
              <span style="color:#606">key</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special.how</span></span>
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: SPECIAL_TYPE_KEY</span></span>
          <span style="color:#606">valueFrom</span>:
            <span style="color:#606">configMapKeyRef</span>:
              <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
              <span style="color:#606">key</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special.type</span></span>
  <span style="color:#606">restartPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Never</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When this pod is run, the output from the <strong>test-container</strong> container will be:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>very charm</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configmaps-use-case-consuming-in-volumes"><a class="anchor" href="#configmaps-use-case-consuming-in-volumes"></a>Consuming in Volumes</h3>
<div class="paragraph">
<p>A <code><strong>ConfigMap</strong></code> can also be consumed in volumes. Returning again to the
following example <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ConfigMap</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
  <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">data</span>:
  <span style="color:#606">special.how</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">very</span></span>
  <span style="color:#606">special.type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">charm</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You have a couple different options for consuming this <code><strong>ConfigMap</strong></code> in a
volume. The most basic way is to populate the volume with files where the key is
the file name and the content of the file is the value of the key:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dapi-test-pod</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: test-container</span></span>
      <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">gcr.io/google_containers/busybox</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[ &quot;/bin/sh&quot;, &quot;cat&quot;, &quot;/etc/config/special.how&quot; ]</span></span>
      <span style="color:#606">volumeMounts</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: config-volume</span></span>
        <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/etc/config</span></span>
  <span style="color:#606">volumes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: config-volume</span></span>
      <span style="color:#606">configMap</span>:
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
  <span style="color:#606">restartPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Never</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When this pod is run, the output will be:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>very</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also control the paths within the volume where <code><strong>ConfigMap</strong></code> keys are
projected:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dapi-test-pod</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: test-container</span></span>
      <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">gcr.io/google_containers/busybox</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[ &quot;/bin/sh&quot;, &quot;cat&quot;, &quot;/etc/config/path/to/special-key&quot; ]</span></span>
      <span style="color:#606">volumeMounts</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: config-volume</span></span>
        <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/etc/config</span></span>
  <span style="color:#606">volumes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: config-volume</span></span>
      <span style="color:#606">configMap</span>:
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">special-config</span></span>
        <span style="color:#606">items</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">key: special.how</span></span>
          <span style="color:#606">path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">path/to/special-key</span></span>
  <span style="color:#606">restartPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Never</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When this pod is run, the output will be:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>very</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configmaps-example-configuring-redis"><a class="anchor" href="#configmaps-example-configuring-redis"></a>Example: Configuring Redis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a real-world example, you can configure Redis using a <code><strong>ConfigMap</strong></code>. To
inject Redis with the recommended configuration for using Redis as a cache, the
Redis configuration file should contain the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>maxmemory 2mb
maxmemory-policy allkeys-lru</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If your configuration file is located at <strong><em>example-files/redis/redis-config</em></strong>,
create a <code><strong>ConfigMap</strong></code> with it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code><strong>ConfigMap</strong></code> specifying the configuration file:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create configmap example-redis-config \
    --from-file=example-files/redis/redis-config</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Verify the results:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc get configmap example-redis-config -o yaml

apiVersion: v1
data:
  redis-config: |
    maxmemory 2mb
    maxmemory-policy allkeys-lru
kind: ConfigMap
metadata:
  creationTimestamp: 2016-04-06T05:53:07Z
  name: example-redis-config
  namespace: default
  resourceVersion: "2985"
  selflink: /api/v1/namespaces/default/configmaps/example-redis-config
  uid: d65739c1-fbbb-11e5-8a72-68f728db1985</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, create a pod that uses this <code><strong>ConfigMap</strong></code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a pod definition like the following and save it to a file, for example
<strong><em>redis-pod.yaml</em></strong>:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">redis</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: redis</span></span>
    <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes/redis:v1</span></span>
    <span style="color:#606">env</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: MASTER</span></span>
      <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
    <span style="color:#606">ports</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerPort: 6379</span></span>
    <span style="color:#606">resources</span>:
      <span style="color:#606">limits</span>:
        <span style="color:#606">cpu</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0.1</span><span style="color:#710">&quot;</span></span>
    <span style="color:#606">volumeMounts</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mountPath: /redis-master-data</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">data</span></span>
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mountPath: /redis-master</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">config</span></span>
  <span style="color:#606">volumes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: data</span></span>
      <span style="color:#606">emptyDir</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: config</span></span>
      <span style="color:#606">configMap</span>:
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-redis-config</span></span>
        <span style="color:#606">items</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">key: redis-config</span></span>
          <span style="color:#606">path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">redis.conf</span></span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Create the pod:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc create -f redis-pod.yaml</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The newly-created pod has a <code><strong>ConfigMap</strong></code> volume that places the <strong>redis-config</strong>
key of the <strong>example-redis-config</strong> <code><strong>ConfigMap</strong></code> into a file called
<strong><em>redis.conf</em></strong>. This volume is mounted into the <strong><em>/redis-master</em></strong> directory in
the Redis container, placing our configuration file at
<strong><em>/redis-master/redis.conf</em></strong>, which is where the image looks for the Redis
configuration file for the master.</p>
</div>
<div class="paragraph">
<p>If you <code>oc exec</code> into this pod and run the <code>redis-cli</code> tool, you can check that
the configuration was applied correctly:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ oc exec -it redis redis-cli
127.0.0.1:6379&gt; CONFIG GET maxmemory
1) "maxmemory"
2) "2097152"
127.0.0.1:6379&gt; CONFIG GET maxmemory-policy
1) "maxmemory-policy"
2) "allkeys-lru"</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configmaps-restrictions"><a class="anchor" href="#configmaps-restrictions"></a>Restrictions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code><strong>ConfigMap</strong></code> must be created before they are consumed in pods. Controllers
can be written to tolerate missing configuration data; consult individual
components configured via <code><strong>ConfigMap</strong></code> on a case-by-case basis.</p>
</div>
<div class="paragraph">
<p><code><strong>ConfigMap</strong></code> objects reside in a project. They can only be referenced by pods
in the same project.</p>
</div>
<div class="paragraph">
<p>The Kubelet only supports use of a <code><strong>ConfigMap</strong></code> for pods it gets from the API
server. This includes any pods created using the CLI, or indirectly from a
replication controller. It does not include pods created using the
Digital Garage node&#8217;s <code>--manifest-url</code> flag, its <code>--config</code> flag, or its REST
API (these are not common ways to create pods).</p>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
  <footer class="footer-digital-garage">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-4 col-md-3 logo">
        <a href="http://www.thedigitalgarage.io/"></a>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-6 text-center">
        <div class="row">
          <div class="col-xs-12 col-md-4">
          <a href="http://community.thedigitalgarage.io">
            Our Community
          </a>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3 text-right">
        <a id="built_with_asciibinder" href="http://asciibinder.org/">
          <img src="http://docs.thedigitalgarage.io/_images/asciibinder_web_logo.svg" alt="AsciiBinder" />
        </a>
      </div>
    </div>
  </div>
</footer>

<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->
</body>
</html>