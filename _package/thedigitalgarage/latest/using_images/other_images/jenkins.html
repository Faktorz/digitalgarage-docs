<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Digital Garage | Using Images | Other Images | Jenkins</title>
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/subdomain.css" rel="stylesheet" type="text/css">
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/docs.css" rel="stylesheet" type="text/css"/>
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <!--
  <link href="https://raw.githubusercontent.com/thedigitalgarage/origin-web-console/master/extensions/thedigitalgarage/css/main.css" rel="stylesheet" type="text/css">
  -->
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/images/favicon.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="http://assets-digitalgarage-infra.apps.thedigitalgarage.io/images/favicon.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="Digital Garage Documentation" name="application-name">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-84210257-3', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
  <div class="navbar navbar-default navbar-digital-garage" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand digital-garage" href="/"></a>
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../welcome/index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../welcome/index.html">Digital Garage Discovery</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../using_images/index.html">Using Images</a>
      </li>
      <li class="hidden-xs active"><a href="../../using_images/other_images/index.html">Other Images</a></li>
      <li class="hidden-xs active">
        Jenkins
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          
<script>
  (function() {
    var cx = '013769182564158614814:e-dp46b51vk';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../../getting_started/basic_walkthrough.html">Basic Walkthrough</a></li>
            <li><a class="" href="../../getting_started/beyond_the_basics.html">Beyond the Basics</a></li>
            <li><a class="" href="../../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../../getting_started/developers_cli.html">Command-Line Walkthrough</a></li>
            <li><a class="" href="../../getting_started/devpreview_faq.html">Developer Preview FAQ</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-1">
                <span id="sgSpan-2-1" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-2-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../architecture/core_concepts/index.html">Overview</a></li>

                  <li><a class="" href="../../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>

                  <li><a class="" href="../../architecture/core_concepts/containers_and_images.html">Images</a></li>

                  <li><a class="" href="../../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>

                  <li><a class="" href="../../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>

                  <li><a class="" href="../../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>

                  <li><a class="" href="../../architecture/core_concepts/deployments.html">Deployments</a></li>

                  <li><a class="" href="../../architecture/core_concepts/routes.html">Routes</a></li>

                  <li><a class="" href="../../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-2">
                <span id="sgSpan-2-2" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-2-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../architecture/additional_concepts/overview.html">Overview</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/networking.html">Networking</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/scm.html">Source Control Management</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../../cli_reference/cli_by_example_content.html">CLI by example</a></li>
            <li><a class="" href="../../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Developer Guide
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-5">
                <span id="sgSpan-4-5" class="fa fa-caret-right"></span>&nbsp;Migrating Applications
              </a>
              <ul id="topicSubGroup-4-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../dev_guide/migrating_applications/index.html">Overview</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/database_applications.html">Database Applications</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/web_framework_applications.html">Web Framework Applications</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/quickstart_examples.html">QuickStart Examples</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/continuous_integration_and_deployment.html">Continuous Integration and Deployment</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/web_hooks_action_hooks.html">Webhooks and Action Hooks</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/S2I_tool.html">S2I Tool</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/support_guide.html">Support Guide</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-6">
                <span id="sgSpan-4-6" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-4-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../dev_guide/app_tutorials/index.html">Overview</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/maven_tutorial.html">Setting Up a Nexus Mirror</a></li>
              </ul>
            </li>
            <li><a class="" href="../../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../../dev_guide/getting_traffic_into_cluster.html">Getting Traffic Into The Cluster</a></li>
            <li><a class="" href="../../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../../dev_guide/secrets.html">Secrets</a></li>
            <li><a class="" href="../../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../../dev_guide/daemonsets.html">Using Daemonsets</a></li>
            <li><a class="" href="../../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../../dev_guide/pod_disruption_budget.html">Pod Disruption Budget</a></li>
            <li><a class="" href="../../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../../dev_guide/jobs.html">Jobs</a></li>
            <li><a class="" href="../../dev_guide/scheduled_jobs.html">Scheduled Jobs</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../../creating_images/custom.html">Custom Builder</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-down"></span>Using Images
      </a>
      <ul id="topicGroup6" class="collapse in list-unstyled">
            <li><a class="" href="../../using_images/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-1">
                <span id="sgSpan-6-1" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-6-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/s2i_images/index.html">Overview</a></li>

                  <li><a class="" href="../../using_images/s2i_images/customizing_s2i_images.html">Customizing S2I images</a></li>

                  <li><a class="" href="../../using_images/s2i_images/nodejs.html">Node.js</a></li>

                  <li><a class="" href="../../using_images/s2i_images/perl.html">Perl</a></li>

                  <li><a class="" href="../../using_images/s2i_images/php.html">PHP</a></li>

                  <li><a class="" href="../../using_images/s2i_images/python.html">Python</a></li>

                  <li><a class="" href="../../using_images/s2i_images/java.html">Java</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-2">
                <span id="sgSpan-6-2" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-6-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/db_images/index.html">Overview</a></li>

                  <li><a class="" href="../../using_images/db_images/mysql.html">MySQL</a></li>

                  <li><a class="" href="../../using_images/db_images/postgresql.html">PostgreSQL</a></li>

                  <li><a class="" href="../../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-3">
                <span id="sgSpan-6-3" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-6-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-6-4">
                <span id="sgSpan-6-4" class="fa fa-caret-down"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-6-4" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../using_images/other_images/index.html">Overview</a></li>

                  <li><a class=" active" href="../../using_images/other_images/jenkins.html">Jenkins</a></li>

                  <li><a class="" href="../../using_images/other_images/wordpress.html">Wordpress</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Jenkins</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#jenkins-version">Versions</a></li>
<li><a href="#jenkins-images">Images</a></li>
<li><a href="#jenkins-configuration-and-usage">Configuration and Usage</a>
<ul class="sectlevel2">
<li><a href="#jenkins-initializing-jenkins">Initializing Jenkins</a></li>
<li><a href="#jenkins-environment-variables">Environment Variables</a></li>
<li><a href="#jenkins-cross-project-access">Cross Project Access</a></li>
<li><a href="#jenkins-volume-mount-points">Volume Mount Points</a></li>
</ul>
</li>
<li><a href="#jenkins-creating-jenkins-service-from-template">Creating a Jenkins Service from a Template</a></li>
<li><a href="#jenkins-as-s2i-builder">Using Jenkins as a Source-To-Image builder</a></li>
<li><a href="#using-the-jenkins-kubernetes-plug-in-to-run-jobs">Using the Jenkins Kubernetes Plug-in to Run Jobs</a></li>
<li><a href="#tutorial">Tutorial</a></li>
<li><a href="#digital-garage-pipeline-plug-in">Digital Garage Pipeline Plug-in</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Digital Garage provides a container image for running Jenkins. This image provides a Jenkins server instance, which can be used to set up a basic flow for continuous testing, integration, and delivery.</p>
</div>
<div class="paragraph">
<p>This image also includes a sample Jenkins job, which triggers a new build of a <code><strong>BuildConfig</strong></code> defined in Digital Garage, tests the output of that build, and then on successful build, retags the output to indicate the build is ready for production.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-version"><a class="anchor" href="#jenkins-version"></a>Versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Digital Garage follows the <a href="https://jenkins.io/changelog-stable/">LTS</a> releases of Jenkins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-images"><a class="anchor" href="#jenkins-images"></a>Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This image comes in two flavors, depending on your needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RHEL 7</p>
</li>
<li>
<p>CentOS 7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>RHEL 7 Based Image</strong></p>
</div>
<div class="paragraph">
<p>The RHEL 7 image is available through Red Hat&#8217;s subscription registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ docker pull registry.access.redhat.com/openshift3/jenkins-1-rhel7</pre>
</div>
</div>
<div class="paragraph">
<p><strong>CentOS 7 Based Image</strong></p>
</div>
<div class="paragraph">
<p>This image is available on DockerHub. To download it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ docker pull openshift/jenkins-1-centos7</pre>
</div>
</div>
<div class="paragraph">
<p>To use these images, you can either access them directly from these registries or push them into your Digital Garage Docker registry.
Additionally, you can create an ImageStream that points to the image, either in your Docker registry or at the external location.
Your Digital Garage resources can then reference the ImageStream.
You can find <a href="https://github.com/openshift/origin/tree/master/examples/image-streams">example</a> ImageStream definitions for all the provided Digital Garage images.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-configuration-and-usage"><a class="anchor" href="#jenkins-configuration-and-usage"></a>Configuration and Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="jenkins-initializing-jenkins"><a class="anchor" href="#jenkins-initializing-jenkins"></a>Initializing Jenkins</h3>
<div class="paragraph">
<p>You can manage Jenkins authentication in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Digital Garage OAuth authentication provided by the OpenShift Login plug-in.</p>
</li>
<li>
<p>Standard authentication provided by Jenkins</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="jenkins-openshift-oauth-authentication"><a class="anchor" href="#jenkins-openshift-oauth-authentication"></a>Digital Garage OAuth authentication</h4>
<div class="paragraph">
<p><a href="../../architecture/additional_concepts/authentication.html#oauth">OAuth
authentication</a> is activated by configuring the <code><strong>Configure Global Security</strong></code>
panel in the Jenkins UI, or by setting the <code><strong>OPENSHIFT_ENABLE_OAUTH</strong></code>
environment variable on the Jenkins <code><strong>Deployment Config</strong></code> to anything other than
<code>false</code>. This activates the OpenShift Login plug-in, which retrieves the
configuration information from pod data or by interacting with the
Digital Garage API server.</p>
</div>
<div class="paragraph">
<p>Valid user and password combinations are controlled by your identity provider.
For example, if <code>Allow All</code> is the default identity provider, you can provide
any non-empty string for both the user name and password. If you have
administrator privileges in the project Jenkins is running in, you will have
administrative privileges within Jenkins.</p>
</div>
<div class="paragraph">
<p>Valid users are automatically added to the Jenkins authorization matrix at log
in, dictated by the permissions within the Jenkins authorization matrix
associated with the user. Users authenticated against Digital Garage OAuth are
added to the Jenkins authorization matrix on their first successful log in.</p>
</div>
<div class="paragraph">
<p>The <code>admin</code> role maps to the set of permissions traditionally associated with
the <code>admin</code> user in the Digital Garage Jenkins image:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hudson.model.Computer.Configure</p>
</li>
<li>
<p>hudson.model.Computer.Delete</p>
</li>
<li>
<p>hudson.model.Hudson.Administer</p>
</li>
<li>
<p>hudson.model.Hudson.Read</p>
</li>
<li>
<p>hudson.model.Item.Build</p>
</li>
<li>
<p>hudson.model.Item.Configure</p>
</li>
<li>
<p>hudson.model.Item.Create</p>
</li>
<li>
<p>hudson.model.Item.Delete</p>
</li>
<li>
<p>hudson.model.Item.Read</p>
</li>
<li>
<p>hudson.model.Item.Workspace</p>
</li>
<li>
<p>hudson.model.Run.Delete</p>
</li>
<li>
<p>hudson.model.Run.Update</p>
</li>
<li>
<p>hudson.model.View.Configure</p>
</li>
<li>
<p>hudson.model.View.Create</p>
</li>
<li>
<p>hudson.model.View.Delete</p>
</li>
<li>
<p>hudson.scm.SCM.Tag</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Users with the <code>edit</code> or <code>view</code> roles for the Digital Garage project have progressively reduced permissions within Jenkins.</p>
</div>
<div class="paragraph">
<p>For the <code>view</code> role:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hudson.model.Hudson.Read</p>
</li>
<li>
<p>hudson.model.Item.Read</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the <code>edit</code> role, in addition to the permissions available to <code><strong>view</strong></code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hudson.model.Item.Build</p>
</li>
<li>
<p>hudson.model.Item.Configure</p>
</li>
<li>
<p>hudson.model.Item.Create</p>
</li>
<li>
<p>hudson.model.Item.Delete</p>
</li>
<li>
<p>hudson.model.Item.Workspace</p>
</li>
<li>
<p>hudson.scm.SCM.Tag</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>admin</code> user that is pre-populated in the Digital Garage Jenkins image with
administrative privileges will not be given those privileges when
Digital Garage OAuth is used, unless the Digital Garage cluster administrator
explicitly defines that user in the Digital Garage identity provider and
assigns the <code>admin</code> role to the user.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jenkins' users permissions can be changed after the users are initially
established. The OpenShift Login plug-in polls the Digital Garage API server
for permissions and updates the permissions stored in Jenkins for each user with
the permissions retrieved from Digital Garage. If the Jenkins UI is used to
update permissions for a Jenkins user, the permission changes are overwritten
the next time the plug-in polls Digital Garage.</p>
</div>
<div class="paragraph">
<p>You can control how often the polling occurs with the
<code>OPENSHIFT_PERMISSIONS_POLL_INTERVAL</code> environment variable. The default polling
interval is five minutes.</p>
</div>
<div class="olist arabic">
<div class="title">Creating a new Jenkins pod</div>
<ol class="arabic">
<li>
<p>Ensure you have installed
<a href="#../../install_config/imagestreams_templates.adoc">the default imagestreams
and templates</a>.</p>
</li>
<li>
<p>Then create a new Jenkins application using:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Persistent volumes:</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc new-app jenkins-persistent</pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Or an EmptyDir type volume (where configuration does not persist across pod restarts):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc new-app jenkins-ephemeral</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you instantiate the template against releases prior to v3.4 of
Digital Garage, standard Jenkins authentication is used, and the default
'admin' account will exist with password 'password'. See
<a href="../../using_images/other_images/jenkins.html#jenkins-jenkins-standard-authentication">Jenkins
Standard Authentication</a> for details about changing this password.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="jenkins-jenkins-standard-authentication"><a class="anchor" href="#jenkins-jenkins-standard-authentication"></a>Jenkins Standard Authentication</h4>
<div class="paragraph">
<p>Jenkins authentication is used by default if the image is run outside of
Digital Garage.</p>
</div>
<div class="paragraph">
<p>The first time Jenkins starts, the configuration is created along with the
administrator user and password. The default user credentials are <code><strong>admin</strong></code> and
<code><strong>password</strong></code>. Configure the default password by setting the <code><strong>JENKINS_PASSWORD</strong></code>
environment variable when using (and only when using) standard Jenkins
authentication.</p>
</div>
<div class="paragraph">
<p>To create a new Jenkins application using standard Jenkins authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc new-app -e \
    JENKINS_PASSWORD=&lt;password&gt; \
    openshift/jenkins-1-centos7</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jenkins-environment-variables"><a class="anchor" href="#jenkins-environment-variables"></a>Environment Variables</h3>
<div class="paragraph">
<p>The Jenkins server can be configured with the following environment variables:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Jenkins Environment Variables</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code><strong>JENKINS_PASSWORD</strong></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The password for the <code><strong>admin</strong></code> user when using standard Jenkins authentication.  Not applicable when using Digital Garage OAuth authentication.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code><strong>OPENSHIFT_ENABLE_OAUTH</strong></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Determines whether the OpenShift Login plug-in manages authentication when logging into Jenkins. Enabled when set to any non-empty value other than "false".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code><strong>OPENSHIFT_PERMISSIONS_POLL_INTERVAL</strong></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies in seconds how often the OpenShift Login plug-in polls Digital Garage for the permissions associated with each user defined in Jenkins.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jenkins-cross-project-access"><a class="anchor" href="#jenkins-cross-project-access"></a>Cross Project Access</h3>
<div class="paragraph">
<p>If you are going to run Jenkins somewhere other than as a deployment within your same project, you will need to provide an access token to Jenkins to access your project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identify the secret for the service account that has appropriate permissions
to access the project Jenkins needs to access:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc describe serviceaccount default
Name:       default
Labels:     &lt;none&gt;
Secrets:    {  default-token-uyswp    }
            {  default-dockercfg-xcr3d    }
Tokens:     default-token-izv1u
            default-token-uyswp</pre>
</div>
</div>
<div class="paragraph">
<p>In this case the secret is named <code>default-token-uyswp</code></p>
</div>
</li>
<li>
<p>Retrieve the token from the secret:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc describe secret &lt;secret name from above&gt; # e.g. default-token-izv1u
Name:       default-token-izv1u
Labels:     &lt;none&gt;
Annotations:    kubernetes.io/service-account.name=default,kubernetes.io/service-account.uid=32f5b661-2a8f-11e5-9528-3c970e3bf0b7
Type:   kubernetes.io/service-account-token
Data
====
ca.crt: 1066 bytes
token:  eyJhbGc..&lt;content cut&gt;....wRA</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The token field contains the token value Jenkins needs to access the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="jenkins-volume-mount-points"><a class="anchor" href="#jenkins-volume-mount-points"></a>Volume Mount Points</h3>
<div class="paragraph">
<p>The Jenkins image can be run with mounted volumes to enable persistent storage for the configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>/var/lib/jenkins</em></strong> - This is the data directory where Jenkins stores configuration files including job definitions.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-creating-jenkins-service-from-template"><a class="anchor" href="#jenkins-creating-jenkins-service-from-template"></a>Creating a Jenkins Service from a Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../../dev_guide/templates.html#dev-guide-templates">Templates</a> provide parameter fields to
define all the environment variables (password) with predefined defaults.
Digital Garage provides templates to make creating a new Jenkins service easy. The
Jenkins templates should have been registered in the default <strong>openshift</strong> project
by your cluster administrator during the initial cluster setup.</p>
</div>
<div class="paragraph">
<p>The two available templates both define a
<a href="../../architecture/core_concepts/deployments.html#deployments-and-deployment-configurations">deployment
configuration</a> and a
<a href="../../architecture/core_concepts/pods_and_services.html#services">service</a>,
but differ in their storage strategy, which affects whether or not the Jenkins
content persists across a pod restart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A pod may be restarted when it is moved to another node, or when an update of the deployment configuration triggers a redeployment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jenkins-ephemeral</code> uses ephemeral storage. On pod restart, all data is lost.
This template is useful for development or testing only.</p>
</li>
<li>
<p><code>jenkins-persistent</code> uses a persistent volume store. Data survives a pod
restart. To use a persistent volume store, the cluster administrator must
define a persistent volume pool in the Digital Garage deployment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once selected, you must <a href="../../dev_guide/templates.html#dev-guide-templates">instantiate</a> the template to be able to use Jenkins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-as-s2i-builder"><a class="anchor" href="#jenkins-as-s2i-builder"></a>Using Jenkins as a Source-To-Image builder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To customize the official Digital Garage Jenkins image, you have two options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use Docker layering.</p>
</li>
<li>
<p>Use the image as a Source-To-Image builder, described here.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use <a href="../../architecture/core_concepts/builds_and_image_streams.html#source-build">S2I</a>
to copy your custom Jenkins Jobs definitions, additional
plug-ins or replace the provided <strong><em>config.xml</em></strong> file with your own, custom, configuration.</p>
</div>
<div class="paragraph">
<p>In order to include your modifications in the Jenkins image, you need to have a Git
repository with the following directory structure:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>plugins</em></strong></dt>
<dd>
<p>This directory contains those binary Jenkins plug-ins you want to copy into Jenkins.</p>
</dd>
<dt class="hdlist1"><strong><em>plugins.txt</em></strong></dt>
<dd>
<p>This file lists the plug-ins you want to install (see the section above).</p>
</dd>
<dt class="hdlist1"><strong><em>configuration/jobs</em></strong></dt>
<dd>
<p>This directory contains the Jenkins job definitions.</p>
</dd>
<dt class="hdlist1"><strong><em>configuration/config.xml</em></strong></dt>
<dd>
<p>This file contains your custom Jenkins configuration.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The contents of the <strong><em>configuration/</em></strong> directory will be copied
into the <strong><em>/var/lib/jenkins/</em></strong> directory, so you can also include
additional files, such as <strong><em>credentials.xml</em></strong>, there.</p>
</div>
<div class="paragraph">
<p>The following is an example build configuration that customizes the Jenkins
image in Digital Garage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">BuildConfig</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">custom-jenkins-build</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">source</span>:                       <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#606">git</span>:
      <span style="color:#606">uri</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/custom/repository</span></span>
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Git</span></span>
  <span style="color:#606">strategy</span>:                     <i class="conum" data-value="2"></i><b>(2)</b>
    <span style="color:#606">sourceStrategy</span>:
      <span style="color:#606">from</span>:
        <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ImageStreamTag</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">jenkins:latest</span></span>
        <span style="color:#606">namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">openshift</span></span>
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Source</span></span>
  <span style="color:#606">output</span>:                       <i class="conum" data-value="3"></i><b>(3)</b>
    <span style="color:#606">to</span>:
      <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ImageStreamTag</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">custom-jenkins:latest</span></span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>source</code> field defines the source Git repository
with the layout described above.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>strategy</code> field defines the original Jenkins image to use
as a source image for the build.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>output</code> field defines the resulting, customized Jenkins image
you can use in deployment configuration instead of the official Jenkins image.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-jenkins-kubernetes-plug-in-to-run-jobs"><a class="anchor" href="#using-the-jenkins-kubernetes-plug-in-to-run-jobs"></a>Using the Jenkins Kubernetes Plug-in to Run Jobs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The official Digital Garage Jenkins image includes the pre-installed
<a href="https://wiki.jenkins-ci.org/display/JENKINS/Kubernetes+Plugin">Kubernetes
plug-in</a> that allows Jenkins slaves to be dynamically provisioned on multiple
container hosts using Kubernetes and Digital Garage.</p>
</div>
<div class="paragraph">
<p>The Jenkins image entrypoint also provides auto-discovery and auto-configuration
of the Kubernetes plug-ins by scanning the project Jenkins is deployed in for
existing image streams with the label <strong>role</strong> set to <strong>jenkins-slave</strong>.</p>
</div>
<div class="paragraph">
<p>When an image stream with this label is found, the entrypoint generates the
corresponding Kubernetes plug-in configuration so you can assign your Jenkins
jobs to run in a pod running the container image provided by the image stream.</p>
</div>
<div class="paragraph">
<p>To use a container image as an Jenkins slave, the image must run the slave agent as
an entrypoint. For more details about this, refer to the official
<a href="https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-Launchslaveagentheadlessly">Jenkins
documentation</a>.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can use
<a href="https://github.com/openshift/origin/blob/master/examples/jenkins/master-slave/jenkins-slave-template.json">a
provided Digital Garage template</a> to convert an existing image stream to a Jenkins
slave.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tutorial"><a class="anchor" href="#tutorial"></a>Tutorial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more details on the sample job included in this image, see this <a href="https://github.com/openshift/origin/blob/master/examples/jenkins/README.md">tutorial</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="digital-garage-pipeline-plug-in"><a class="anchor" href="#digital-garage-pipeline-plug-in"></a>Digital Garage Pipeline Plug-in</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jenkins image&#8217;s list of pre-installed plug-ins includes a plug-in which
assists in the creating of CI/CD workflows that run against an Digital Garage
server.  A series of build steps, post-build actions, as well as SCM-style
polling are provided which equate to administrative and operational actions on
the Digital Garage server and the API artifacts hosted there.</p>
</div>
<div class="paragraph">
<p>In addition to being accessible from the classic "freestyle" form of Jenkins
job, the build steps as of version 1.0.14 of the Digital Garage Pipeline
Plug-in are also avaible to Jenkins Pipeline jobs via the DSL extension points
provided by the Jenkins Pipeline Plug-in.</p>
</div>
<div class="paragraph">
<p>The
<a href="https://github.com/openshift/jenkins/tree/master/1/contrib/openshift/configuration/jobs/OpenShift%20Sample">sample
Jenkins job</a> that is pre-configured in the Jenkins image utilizes the
Digital Garage pipeline plug-in and serves as an example of how to leverage the
plug-in for creating CI/CD flows for Digital Garage in Jenkins.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/openshift/jenkins-plugin/">the plug-in&#8217;s README</a> for a detailed description of what is available.</p>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
  <footer class="footer-digital-garage">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-4 col-md-3 logo">
        <a href="https://www.thedigitalgarage.io/"></a>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-6 text-center">
        <div class="row">
          <div class="col-xs-12 col-md-4">
            <a href="http://www.thedigitalgarage.io/community/digital-garage-privacy-policy/">
              Privacy Policy
            </a>
          </div>
          <div class="col-xs-12 col-md-4">
          <a href="http://www.thedigitalgarage.io/community/terms-of-service/">
            Terms of Use
          </a>
          </div>
          <div class="col-xs-12 col-md-4">
          <a href="http://www.thedigitalgarage.io/community/">
            Our Community
          </a>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3 text-right">
        <a id="built_with_asciibinder" href="http://asciibinder.org/">
          <img src="http://docs.thedigitalgarage.io/_images/asciibinder_web_logo.svg" alt="AsciiBinder" />
        </a>
      </div>
    </div>
  </div>
</footer>

<!-- Adobe DTM -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
   _satellite.pageBottom();
}
</script>
<!-- End Adobe DTM -->
</body>
</html>