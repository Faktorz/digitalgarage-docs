<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>OpenShift Enterprise | Installation and Configuration | Installing | Disconnected Installation</title>
  <link href="/_stylesheets/subdomain.css" rel="stylesheet" type="text/css">
  <link href="/_stylesheets/docs.css" rel="stylesheet" type="text/css"/>
  <link href="/_stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <!--
  <link href="https://raw.githubusercontent.com/thedigitalgarage/origin-web-console/master/extensions/thedigitalgarage/css/main.css" rel="stylesheet" type="text/css">
  -->
  <link href="/_images/favicon.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="/_images/favicon.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="the Digital Garage" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="../../../master/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="../../../master/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="../../../master/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script type="text/javascript" src="https://assets.openshift.net/app/assets/site/tracking.js"></script>
</head>
<body>
  <div class="navbar navbar-default navbar-openshift" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand" href="/"></a>
  </div>
  <div class="navbar-collapse collapse">
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../welcome/index.html">OpenShift Enterprise Branch Build</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../install_config/index.html">Installation and Configuration</a>
      </li>
      <li class="hidden-xs active"><a href="../../install_config/install/index.html">Installing</a></li>
      <li class="hidden-xs active">
        Disconnected Installation
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          
<script>
  (function() {
    var cx = '013769182564158614814:e-dp46b51vk';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search defaultToRefinement="Enterprise Branch Build"></gcse:search>

        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../../welcome/index.html">Welcome</a></li>
            <li><a class="" href="../../welcome/revhistory_all.html">All Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Release Notes
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../../release_notes/index.html">Overview</a></li>
            <li><a class="" href="../../release_notes/ose_3_2_release_notes.html">OpenShift Enterprise 3.2 Release Notes</a></li>
            <li><a class="" href="../../release_notes/xpaas_release_notes.html">xPaaS Release Notes</a></li>
            <li><a class="" href="../../release_notes/v2_vs_v3.html">Comparing OpenShift Enterprise 2 and OpenShift Enterprise 3</a></li>
            <li><a class="" href="../../release_notes/revhistory_release_notes.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../../getting_started/developers_cli.html">Command-Line Walkthrough</a></li>
            <li><a class="" href="../../getting_started/administrators.html">Setting Up a Cluster</a></li>
            <li><a class="" href="../../getting_started/revhistory_getting_started.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-1">
                <span id="sgSpan-3-1" class="fa fa-caret-right"></span>&nbsp;Infrastructure Components
              </a>
              <ul id="topicSubGroup-3-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../architecture/infrastructure_components/kubernetes_infrastructure.html">Kubernetes Infrastructure</a></li>

                  <li><a class="" href="../../architecture/infrastructure_components/image_registry.html">Image Registry</a></li>

                  <li><a class="" href="../../architecture/infrastructure_components/web_console.html">Web Console</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-2">
                <span id="sgSpan-3-2" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-3-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../architecture/core_concepts/index.html">Overview</a></li>

                  <li><a class="" href="../../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>

                  <li><a class="" href="../../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>

                  <li><a class="" href="../../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>

                  <li><a class="" href="../../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>

                  <li><a class="" href="../../architecture/core_concepts/deployments.html">Deployments</a></li>

                  <li><a class="" href="../../architecture/core_concepts/routes.html">Routes</a></li>

                  <li><a class="" href="../../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-3">
                <span id="sgSpan-3-3" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-3-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../architecture/additional_concepts/networking.html">Networking</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/sdn.html">OpenShift SDN</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/authentication.html">Authentication</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/authorization.html">Authorization</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/storage.html">Persistent Storage</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/throttling.html">Throttling</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/scm.html">Source Control Management</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/admission_controllers.html">Admission Controllers</a></li>

                  <li><a class="" href="../../architecture/additional_concepts/other_api_objects.html">Other API Objects</a></li>
              </ul>
            </li>
            <li><a class="" href="../../architecture/revhistory_architecture.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Installation and Configuration
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../../install_config/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-1">
                <span id="sgSpan-4-1" class="fa fa-caret-down"></span>&nbsp;Installing
              </a>
              <ul id="topicSubGroup-4-1" class="nav-tertiary list-unstyled collapse in">

                  <li><a class="" href="../../install_config/install/index.html">Overview</a></li>

                  <li><a class="" href="../../install_config/install/prerequisites.html">Prerequisites</a></li>

                  <li><a class="" href="../../install_config/install/rpm_vs_containerized.html">RPM vs Containerized</a></li>

                  <li><a class="" href="../../install_config/install/quick_install.html">Quick Installation</a></li>

                  <li><a class="" href="../../install_config/install/advanced_install.html">Advanced Installation</a></li>

                  <li><a class=" active" href="../../install_config/install/disconnected_install.html">Disconnected Installation</a></li>

                  <li><a class="" href="../../install_config/install/docker_registry.html">Configure or Deploy a Docker Registry</a></li>

                  <li><a class="" href="../../install_config/install/deploy_router.html">Configure or Deploy a Router</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-2">
                <span id="sgSpan-4-2" class="fa fa-caret-right"></span>&nbsp;Upgrading
              </a>
              <ul id="topicSubGroup-4-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../install_config/upgrading/index.html">Overview</a></li>

                  <li><a class="" href="../../install_config/upgrading/automated_upgrades.html">Automated Upgrades</a></li>

                  <li><a class="" href="../../install_config/upgrading/manual_upgrades.html">Manual Upgrades</a></li>

                  <li><a class="" href="../../install_config/upgrading/blue_green_deployments.html">Blue-Green Deployments</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/downgrade.html">Downgrading</a></li>
            <li><a class="" href="../../install_config/master_node_configuration.html">Master and Node Configuration</a></li>
            <li><a class="" href="../../install_config/adding_hosts_to_existing_cluster.html">Adding Hosts to an Existing Cluster</a></li>
            <li><a class="" href="../../install_config/imagestreams_templates.html">Loading the Default Image Streams and Templates</a></li>
            <li><a class="" href="../../install_config/certificate_customization.html">Configuring Custom Certificates</a></li>
            <li><a class="" href="../../install_config/configuring_authentication.html">Configuring Authentication and User Agent</a></li>
            <li><a class="" href="../../install_config/syncing_groups_with_ldap.html">Syncing Groups With LDAP</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-10">
                <span id="sgSpan-4-10" class="fa fa-caret-right"></span>&nbsp;Advanced LDAP Configuration
              </a>
              <ul id="topicSubGroup-4-10" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../install_config/advanced_ldap_configuration/index.html">Overview</a></li>

                  <li><a class="" href="../../install_config/advanced_ldap_configuration/sssd_for_ldap_failover.html">Setting up SSSD for LDAP Failover</a></li>

                  <li><a class="" href="../../install_config/advanced_ldap_configuration/configuring_form_based_authentication.html">Configuring Form-Based Authentication</a></li>

                  <li><a class="" href="../../install_config/advanced_ldap_configuration/configuring_extended_ldap_attributes.html">Configuring Extended LDAP Attributes</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/configuring_sdn.html">Configuring the SDN</a></li>
            <li><a class="" href="../../install_config/configuring_aws.html">Configuring for AWS</a></li>
            <li><a class="" href="../../install_config/configuring_openstack.html">Configuring for OpenStack</a></li>
            <li><a class="" href="../../install_config/configuring_gce.html">Configuring for GCE</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-15">
                <span id="sgSpan-4-15" class="fa fa-caret-right"></span>&nbsp;Configuring Persistent Storage
              </a>
              <ul id="topicSubGroup-4-15" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../install_config/persistent_storage/index.html">Overview</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_nfs.html">Using NFS</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_glusterfs.html">Using GlusterFS</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_cinder.html">Using OpenStack Cinder</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_ceph_rbd.html">Using Ceph RBD</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_aws.html">Using AWS Elastic Block Store</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_gce.html">Using GCE Persistent Disk</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_iscsi.html">Using iSCSI</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_fibre_channel.html">Using Fibre Channel</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/dynamically_provisioning_pvs.html">Dynamic Provisioning</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/pod_security_context.html">Volume Security</a></li>

                  <li><a class="" href="../../install_config/persistent_storage/selector_label_binding.html">Selector-Label Volume Binding</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-16">
                <span id="sgSpan-4-16" class="fa fa-caret-right"></span>&nbsp;Persistent Storage Examples
              </a>
              <ul id="topicSubGroup-4-16" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../install_config/storage_examples/index.html">Overview</a></li>

                  <li><a class="" href="../../install_config/storage_examples/shared_storage.html">Sharing an NFS PV Across Two Pods</a></li>

                  <li><a class="" href="../../install_config/storage_examples/ceph_example.html">Complete Example Using Ceph RBD</a></li>

                  <li><a class="" href="../../install_config/storage_examples/gluster_example.html">Complete Example Using GlusterFS</a></li>

                  <li><a class="" href="../../install_config/storage_examples/privileged_pod_storage.html">Mounting Volumes To Privileged Pods</a></li>

                  <li><a class="" href="../../install_config/storage_examples/gluster_backed_registry.html">Backing Docker Registry with GlusterFS Storage</a></li>

                  <li><a class="" href="../../install_config/storage_examples/binding_pv_by_label.html">Binding Persistent Volumes by Label</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/http_proxies.html">Working with HTTP Proxies</a></li>
            <li><a class="" href="../../install_config/build_defaults_overrides.html">Configuring Global Build Defaults and Overrides</a></li>
            <li><a class="" href="../../install_config/configuring_pipeline_execution.html">Configuring Build Pipeline Execution</a></li>
            <li><a class="" href="../../install_config/configuring_routing.html">Configuring Routing</a></li>
            <li><a class="" href="../../install_config/routing_from_edge_lb.html">Routing from Edge Load Balancers</a></li>
            <li><a class="" href="../../install_config/aggregate_logging.html">Aggregating Container Logs</a></li>
            <li><a class="" href="../../install_config/cluster_metrics.html">Enabling Cluster Metrics</a></li>
            <li><a class="" href="../../install_config/web_console_customization.html">Customizing the Web Console</a></li>
            <li><a class="" href="../../install_config/revhistory_install_config.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Administrator Solutions
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../../admin_solutions/index.html">Overview</a></li>
            <li><a class="" href="../../admin_solutions/master_node_config.html">Master and Node Configuration</a></li>
            <li><a class="" href="../../admin_solutions/user_role_mgmt.html">User and Role Management</a></li>
            <li><a class="" href="../../admin_solutions/authentication.html">Authentication</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>Cluster Administration
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../../admin_guide/index.html">Overview</a></li>
            <li><a class="" href="../../admin_guide/manage_nodes.html">Managing Nodes</a></li>
            <li><a class="" href="../../admin_guide/manage_users.html">Managing Users</a></li>
            <li><a class="" href="../../admin_guide/managing_projects.html">Managing Projects</a></li>
            <li><a class="" href="../../admin_guide/service_accounts.html">Configuring Service Accounts</a></li>
            <li><a class="" href="../../admin_guide/manage_authorization_policy.html">Managing Authorization Policies</a></li>
            <li><a class="" href="../../admin_guide/image_policy.html">Image Policy</a></li>
            <li><a class="" href="../../admin_guide/scoped_tokens.html">Scoped Tokens</a></li>
            <li><a class="" href="../../admin_guide/monitoring_images.html">Monitoring Images</a></li>
            <li><a class="" href="../../admin_guide/manage_scc.html">Managing Security Context Constraints</a></li>
            <li><a class="" href="../../admin_guide/quota.html">Setting Quotas</a></li>
            <li><a class="" href="../../admin_guide/multiproject_quota.html">Setting Multi-Project Quotas</a></li>
            <li><a class="" href="../../admin_guide/limits.html">Setting Limit Ranges</a></li>
            <li><a class="" href="../../admin_guide/pruning_resources.html">Pruning Objects</a></li>
            <li><a class="" href="../../admin_guide/garbage_collection.html">Garbage Collection</a></li>
            <li><a class="" href="../../admin_guide/scheduler.html">Scheduler</a></li>
            <li><a class="" href="../../admin_guide/allocating_node_resources.html">Allocating Node Resources</a></li>
            <li><a class="" href="../../admin_guide/overcommit.html">Overcommitting</a></li>
            <li><a class="" href="../../admin_guide/limit_runonce_pod_duration.html">Limit Run-once Pod Duration</a></li>
            <li><a class="" href="../../admin_guide/limit_pod_access_egress.html">Limit Pod Access with Egress Firewall</a></li>
            <li><a class="" href="../../admin_guide/router.html">Monitoring Routers</a></li>
            <li><a class="" href="../../admin_guide/high_availability.html">High Availability</a></li>
            <li><a class="" href="../../admin_guide/pod_network.html">Managing Pod Networks</a></li>
            <li><a class="" href="../../admin_guide/iptables.html">IPtables</a></li>
            <li><a class="" href="../../admin_guide/securing_builds.html">Securing Builds by Strategy</a></li>
            <li><a class="" href="../../admin_guide/building_dependency_trees.html">Building Dependency Trees</a></li>
            <li><a class="" href="../../admin_guide/backup_restore.html">Backup and Restore</a></li>
            <li><a class="" href="../../admin_guide/sdn_troubleshooting.html">Troubleshooting Networking</a></li>
            <li><a class="" href="../../admin_guide/revhistory_admin_guide.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
            <li><a class="" href="../../cli_reference/basic_cli_operations.html">Developer CLI Operations</a></li>
            <li><a class="" href="../../cli_reference/admin_cli_operations.html">Administrator CLI Operations</a></li>
            <li><a class="" href="../../cli_reference/revhistory_cli_reference.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8">
        <span id="tgSpan8" class="fa fa-angle-right"></span>Developer Guide
      </a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-8-5">
                <span id="sgSpan-8-5" class="fa fa-caret-right"></span>&nbsp;Migrating Applications
              </a>
              <ul id="topicSubGroup-8-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../dev_guide/migrating_applications/index.html">Overview</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/database_applications.html">Database Applications</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/web_framework_applications.html">Web Framework Applications</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/quickstart_examples.html">QuickStart Examples</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/continuous_integration_and_deployment.html">Continuous Integration and Deployment</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/web_hooks_action_hooks.html">Webhooks and Action Hooks</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/S2I_tool.html">S2I Tool</a></li>

                  <li><a class="" href="../../dev_guide/migrating_applications/support_guide.html">Support Guide</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-8-6">
                <span id="sgSpan-8-6" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-8-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../dev_guide/app_tutorials/index.html">Overview</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>

                  <li><a class="" href="../../dev_guide/app_tutorials/maven_tutorial.html">Setting Up a Nexus Mirror</a></li>
              </ul>
            </li>
            <li><a class="" href="../../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../../dev_guide/secrets.html">Secrets</a></li>
            <li><a class="" href="../../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../../dev_guide/jobs.html">Jobs</a></li>
            <li><a class="" href="../../dev_guide/revhistory_dev_guide.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9">
        <span id="tgSpan9" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li><a class="" href="../../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../../creating_images/custom.html">Custom Builder</a></li>
            <li><a class="" href="../../creating_images/revhistory_creating_images.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10">
        <span id="tgSpan10" class="fa fa-angle-right"></span>Using Images
      </a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-0">
                <span id="sgSpan-10-0" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-10-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/s2i_images/index.html">Overview</a></li>

                  <li><a class="" href="../../using_images/s2i_images/customizing_s2i_images.html">Customizing S2I images</a></li>

                  <li><a class="" href="../../using_images/s2i_images/nodejs.html">Node.js</a></li>

                  <li><a class="" href="../../using_images/s2i_images/ruby.html">Ruby</a></li>

                  <li><a class="" href="../../using_images/s2i_images/perl.html">Perl</a></li>

                  <li><a class="" href="../../using_images/s2i_images/php.html">PHP</a></li>

                  <li><a class="" href="../../using_images/s2i_images/python.html">Python</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-1">
                <span id="sgSpan-10-1" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-10-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/db_images/index.html">Overview</a></li>

                  <li><a class="" href="../../using_images/db_images/mysql.html">MySQL</a></li>

                  <li><a class="" href="../../using_images/db_images/postgresql.html">PostgreSQL</a></li>

                  <li><a class="" href="../../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-2">
                <span id="sgSpan-10-2" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-10-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-3">
                <span id="sgSpan-10-3" class="fa fa-caret-right"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-10-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/other_images/index.html">Overview</a></li>

                  <li><a class="" href="../../using_images/other_images/jenkins.html">Jenkins</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-10-4">
                <span id="sgSpan-10-4" class="fa fa-caret-right"></span>&nbsp;xPaaS Middleware Images
              </a>
              <ul id="topicSubGroup-10-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../../using_images/xpaas_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li><a class="" href="../../using_images/revhistory_using_images.html">Revision History</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11">
        <span id="tgSpan11" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
            <li><a class="" href="../../rest_api/revhistory_rest_api.html">Revision History</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Disconnected Installation</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#disconnected-prerequisites">Prerequisites</a></li>
<li><a href="#disconnected-required-software-and-components">Required Software and Components</a>
<ul class="sectlevel2">
<li><a href="#disconnected-syncing-repos">Syncing Repositories</a></li>
<li><a href="#disconnected-syncing-images">Syncing Images</a></li>
<li><a href="#disconnected-preparing-images-for-export">Preparing Images for Export</a></li>
</ul>
</li>
<li><a href="#disconnected-repo-server">Repository Server</a>
<ul class="sectlevel2">
<li><a href="#disconnected-placing-the-software">Placing the Software</a></li>
</ul>
</li>
<li><a href="#disconnected-openshift-systems">OpenShift Enterprise Systems</a>
<ul class="sectlevel2">
<li><a href="#disconnected-building-your-hosts">Building Your Hosts</a></li>
<li><a href="#disconnected-connecting-repos">Connecting the Repositories</a></li>
<li><a href="#disconnected-host-preparations">Host Preparation</a></li>
</ul>
</li>
<li><a href="#disconnected-installing-openshift">Installing OpenShift Enterprise</a>
<ul class="sectlevel2">
<li><a href="#disconnected-importing-containerized-components">Importing OpenShift Enterprise Containerized Components</a></li>
<li><a href="#disconnected-running-the-openshift-installer">Running the OpenShift Enterprise Installer</a></li>
<li><a href="#disconnected-creating-the-internal-docker-registry">Creating the Internal Docker Registry</a></li>
</ul>
</li>
<li><a href="#disconnected-post-installation-changes">Post-Installation Changes</a>
<ul class="sectlevel2">
<li><a href="#disconnected-re-tagging-s2i-builder-images">Re-tagging S2I Builder Images</a></li>
<li><a href="#disconnected-creating-an-admin-user">Creating an Administrative User</a></li>
<li><a href="#disconnected-modifying-the-securitry-policies">Modifying the Security Policies</a></li>
<li><a href="#disconnected-editing-the-image-stream-definitions">Editing the Image Stream Definitions</a></li>
<li><a href="#disconnected-loading-the-docker-images">Loading the Docker Images</a></li>
</ul>
</li>
<li><a href="#disconnected-installing-a-router">Installing a Router</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Frequently, portions of a datacenter may not have access to the Internet, even
via proxy servers. Installing OpenShift Enterprise in these environments is
considered a disconnected installation.</p>
</div>
<div class="paragraph">
<p>An OpenShift Enterprise disconnected installation differs from a regular
installation in two primary ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The OpenShift Enterprise software channels and repositories are not available via Red Hat’s
content distribution network.</p>
</li>
<li>
<p>OpenShift Enterprise uses several containerized components. Normally, these images
are pulled directly from Red Hat’s Docker registry. In a disconnected
environment, this is not possible.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A disconnected installation ensures the OpenShift Enterprise software is made
available to the relevant servers, then follows the same installation process as
a standard connected installation. This topic additionally details how to
manually download the Docker images and transport them onto the relevant
servers.</p>
</div>
<div class="paragraph">
<p>Once installed, in order to use OpenShift Enterprise, you will need source code in a
source control repository (for example, Git). This topic assumes that an
internal Git repository is available that can host source code and this
repository is accessible from the OpenShift Enterprise nodes. Installing the source
control repository is outside the scope of this document.</p>
</div>
<div class="paragraph">
<p>Also, when building applications in OpenShift Enterprise, your build may have some
external dependencies, such as a Maven Repository or Gem files for Ruby
applications. For this reason, and because they might require certain tags, many
of the Quickstart templates offered by OpenShift Enterprise may not work on a
disconnected environment. However, while Red Hat Docker images try to reach out
to external repositories by default, you can configure OpenShift Enterprise to use
your own internal repositories. For the purposes of this document, we assume
that such internal repositories already exist and are accessible from the
OpenShift Enterprise nodes hosts. Installing such repositories is outside the scope
of this document.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also have a
<a href="http://www.redhat.com/en/technologies/linux-platforms/satellite">Red Hat
Satellite</a> server that provides access to Red Hat content via an intranet or
LAN. For environments with Satellite, you can synchronize the OpenShift Enterprise
software onto the Satellite for use with the OpenShift Enterprise servers.</p>
</div>
<div class="paragraph">
<p><a href="https://access.redhat.com/documentation/en/red-hat-satellite/">Red Hat Satellite
6.1</a> also introduces the ability to act as a Docker registry, and it can be used
to host the OpenShift Enterprise containerized components. Doing so is outside of the
scope of this document.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-prerequisites"><a class="anchor" href="#disconnected-prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document assumes that you understand
<a href="../../architecture/index.html#architecture-index">OpenShift Enterprise&#8217;s overall architecture</a> and that
you have already planned out what the topology of your environment will look
like.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-required-software-and-components"><a class="anchor" href="#disconnected-required-software-and-components"></a>Required Software and Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to pull down the required software repositories and Docker images, you
will need a Red Hat Enterprise Linux (RHEL) 7 server with access to the Internet
and at least 100GB of additional free space. All steps in this section should be
performed on the Internet-connected server as the root system user.</p>
</div>
<div class="sect2">
<h3 id="disconnected-syncing-repos"><a class="anchor" href="#disconnected-syncing-repos"></a>Syncing Repositories</h3>
<div class="paragraph">
<p>Before you sync with the required repositories, you may need to import the
appropriate GPG key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</pre>
</div>
</div>
<div class="paragraph">
<p>If the key is not imported, the indicated package is deleted after syncing the repository.</p>
</div>
<div class="paragraph">
<p>To sync the required repositories:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register the server with the Red Hat Customer Portal. You must use the login
and password associated with the account that has access to the OpenShift Enterprise
subscriptions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager register</pre>
</div>
</div>
</li>
<li>
<p>Attach to a subscription that provides OpenShift Enterprise channels. You can find
the list of available subscriptions using:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager list --available</pre>
</div>
</div>
<div class="paragraph">
<p>Then, find the pool ID for the subscription that provides OpenShift Enterprise, and
attach it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># subscription-manager attach --pool=&lt;pool_id&gt;
# subscription-manager repos --disable="*"
# subscription-manager repos \
    --enable="rhel-7-server-rpms" \
    --enable="rhel-7-server-extras-rpms" \
    --enable="rhel-7-server-ose-3.2-rpms"</pre>
</div>
</div>
</li>
<li>
<p>The <code>yum-utils</code> command provides the <strong>reposync</strong> utility, which lets you mirror
yum repositories, and <code>createrepo</code> can create a usable <code>yum</code> repository from a
directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum -y install yum-utils createrepo docker git</pre>
</div>
</div>
<div class="paragraph">
<p>You will need up to 110GB of free space in order to sync the software. Depending
on how restrictive your organization’s policies are, you could re-connect this
server to the disconnected LAN and use it as the repository server. You could
use USB-connected storage and transport the software to another server that will
act as the repository server. This topic covers these options.</p>
</div>
</li>
<li>
<p>Make a path to where you want to sync the software (either locally or on your
USB or other device):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir -p &lt;/path/to/repos&gt;</pre>
</div>
</div>
</li>
<li>
<p>Sync the packages and create the repository for each of them. You will need to
modify the command for the appropriate path you created above:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># for repo in \
rhel-7-server-rpms rhel-7-server-extras-rpms \
rhel-7-server-ose-3.2-rpms
do
  reposync --gpgcheck -lm --repoid=${repo} --download_path=/path/to/repos
  createrepo -v &lt;/path/to/repos/&gt;${repo} -o &lt;/path/to/repos/&gt;${repo}
done</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-syncing-images"><a class="anchor" href="#disconnected-syncing-images"></a>Syncing Images</h3>
<div class="paragraph">
<p>To sync the Docker images:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the Docker daemon:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl start docker</pre>
</div>
</div>
</li>
<li>
<p>Pull all of the required OpenShift Enterprise containerized components:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker pull registry.access.redhat.com/openshift3/ose-haproxy-router:v3.2.1.13
# docker pull registry.access.redhat.com/openshift3/ose-deployer:v3.2.1.13
# docker pull registry.access.redhat.com/openshift3/ose-sti-builder:v3.2.1.13
# docker pull registry.access.redhat.com/openshift3/ose-docker-builder:v3.2.1.13
# docker pull registry.access.redhat.com/openshift3/ose-pod:v3.2.1.13
# docker pull registry.access.redhat.com/openshift3/ose-docker-registry:v3.2.1.13</pre>
</div>
</div>
</li>
<li>
<p>Pull all of the required OpenShift Enterprise containerized components for the
additional centralized log aggregation and metrics aggregation components:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker pull registry.access.redhat.com/openshift3/logging-deployment
# docker pull registry.access.redhat.com/openshift3/logging-elasticsearch
# docker pull registry.access.redhat.com/openshift3/logging-kibana
# docker pull registry.access.redhat.com/openshift3/logging-fluentd
# docker pull registry.access.redhat.com/openshift3/logging-auth-proxy
# docker pull registry.access.redhat.com/openshift3/metrics-deployer
# docker pull registry.access.redhat.com/openshift3/metrics-hawkular-metrics
# docker pull registry.access.redhat.com/openshift3/metrics-cassandra
# docker pull registry.access.redhat.com/openshift3/metrics-heapster</pre>
</div>
</div>
</li>
<li>
<p>Pull the Red Hat-certified
<a href="../../architecture/core_concepts/builds_and_image_streams.html#source-build">Source-to-Image
(S2I)</a> builder images that you intend to use in your OpenShift environment. You
can pull the following images:</p>
<div class="ulist">
<ul>
<li>
<p>jboss-eap70-openshift</p>
</li>
<li>
<p>jboss-amq-62</p>
</li>
<li>
<p>jboss-datagrid65-openshift</p>
</li>
<li>
<p>jboss-decisionserver62-openshift</p>
</li>
<li>
<p>jboss-eap64-openshift</p>
</li>
<li>
<p>jboss-eap70-openshift</p>
</li>
<li>
<p>jboss-webserver30-tomcat7-openshift</p>
</li>
<li>
<p>jboss-webserver30-tomcat8-openshift</p>
</li>
<li>
<p>mongodb</p>
</li>
<li>
<p>mysql</p>
</li>
<li>
<p>nodejs</p>
</li>
<li>
<p>perl</p>
</li>
<li>
<p>php</p>
</li>
<li>
<p>postgresql</p>
</li>
<li>
<p>python</p>
</li>
<li>
<p>redhat-sso70-openshift</p>
</li>
<li>
<p>ruby</p>
<div class="paragraph">
<p>Make sure to indicate the correct tag specifying the desired version number. For
example, to pull both the previous and latest version of the Tomcat image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker pull \
registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:latest
# docker pull \
registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:1.1</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-preparing-images-for-export"><a class="anchor" href="#disconnected-preparing-images-for-export"></a>Preparing Images for Export</h3>
<div class="paragraph">
<p>Docker images can be exported from a system by first saving them to a tarball
and then transporting them:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make and change into a repository home directory:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># mkdir &lt;/path/to/repos/images&gt;
# cd &lt;/path/to/repos/images&gt;</pre>
</div>
</div>
</li>
<li>
<p>Export the OpenShift Enterprise containerized components:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker save -o ose3-images.tar \
    registry.access.redhat.com/openshift3/ose-haproxy-router \
    registry.access.redhat.com/openshift3/ose-deployer \
    registry.access.redhat.com/openshift3/ose-sti-builder \
    registry.access.redhat.com/openshift3/ose-docker-builder \
    registry.access.redhat.com/openshift3/ose-pod \
    registry.access.redhat.com/openshift3/ose-docker-registry</pre>
</div>
</div>
</li>
<li>
<p>If you synchronized the metrics and log aggregation images, export:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker save -o ose3-logging-metrics-images.tar \
    registry.access.redhat.com/openshift3/logging-deployment \
    registry.access.redhat.com/openshift3/logging-elasticsearch \
    registry.access.redhat.com/openshift3/logging-kibana \
    registry.access.redhat.com/openshift3/logging-fluentd \
    registry.access.redhat.com/openshift3/logging-auth-proxy \
    registry.access.redhat.com/openshift3/metrics-deployer \
    registry.access.redhat.com/openshift3/metrics-hawkular-metrics \
    registry.access.redhat.com/openshift3/metrics-cassandra \
    registry.access.redhat.com/openshift3/metrics-heapster</pre>
</div>
</div>
</li>
<li>
<p>Export the S2I builder images that you synced in the previous section. For
example, if you synced only the Tomcat image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker save -o ose3-builder-images.tar \
    registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:latest \
    registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:1.1 \</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-repo-server"><a class="anchor" href="#disconnected-repo-server"></a>Repository Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the installation (and for later updates, should you so choose), you will
need a webserver to host the repositories. RHEL 7 can provide the Apache
webserver.</p>
</div>
<div class="paragraph">
<p><strong>Option 1</strong>: Re-configuring as a Web server</p>
</div>
<div class="paragraph">
<p>If you can re-connect the server where you synchronized the software and images
to your LAN, then you can simply install Apache on the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum install httpd</pre>
</div>
</div>
<div class="paragraph">
<p>Skip to <a href="#disconnected-placing-the-software">Placing the Software</a>.</p>
</div>
<div class="paragraph">
<p><strong>Option 2</strong>: Building a Repository Server</p>
</div>
<div class="paragraph">
<p>If you need to build a separate server to act as the repository server, install
a new RHEL 7 system with at least 110GB of space. On this repository server
during the installation, make sure you select the <strong>Basic Web Server</strong> option.</p>
</div>
<div class="sect2">
<h3 id="disconnected-placing-the-software"><a class="anchor" href="#disconnected-placing-the-software"></a>Placing the Software</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If necessary, attach the external storage, and then copy the repository
files into Apache’s root folder. Note that the below copy step (<code>cp -a</code>) should
be substituted with move (<code>mv</code>) if you are repurposing the server you used to
sync:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># cp -a /path/to/repos /var/www/html/
# chmod -R +r /var/www/html/repos
# restorecon -vR /var/www/html</pre>
</div>
</div>
</li>
<li>
<p>Add the firewall rules:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># firewall-cmd --permanent --add-service=http
# firewall-cmd --reload</pre>
</div>
</div>
</li>
<li>
<p>Enable and start Apache for the changes to take effect:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># systemctl enable httpd
# systemctl start httpd</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-openshift-systems"><a class="anchor" href="#disconnected-openshift-systems"></a>OpenShift Enterprise Systems</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="disconnected-building-your-hosts"><a class="anchor" href="#disconnected-building-your-hosts"></a>Building Your Hosts</h3>
<div class="paragraph">
<p>At this point you can perform the initial creation of the hosts that will be
part of the OpenShift Enterprise environment. It is recommended to use the latest version
of RHEL 7 and to perform a minimal installation. You will also
want to pay attention to the other
<a href="../../install_config/install/prerequisites.html#install-config-install-prerequisites">OpenShift Enterprise-specific
prerequisites</a>.</p>
</div>
<div class="paragraph">
<p>Once the hosts are initially built, the repositories can be set up.</p>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-connecting-repos"><a class="anchor" href="#disconnected-connecting-repos"></a>Connecting the Repositories</h3>
<div class="paragraph">
<p>On all of the relevant systems that will need OpenShift Enterprise software
components, create the required repository definitions. Place the following text
in the <strong><em>/etc/yum.repos.d/ose.repo</em></strong> file, replacing <code>&lt;server_IP&gt;</code> with the IP
or host name of the Apache server hosting the software repositories:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[rhel-7-server-rpms]
name=rhel-7-server-rpms
baseurl=http://&lt;server_IP&gt;/repos/rhel-7-server-rpms
enabled=1
gpgcheck=0
[rhel-7-server-extras-rpms]
name=rhel-7-server-extras-rpms
baseurl=http://&lt;server_IP&gt;/repos/rhel-7-server-extras-rpms
enabled=1
gpgcheck=0
[rhel-7-server-ose-3.2-rpms]
name=rhel-7-server-ose-3.2-rpms
baseurl=http://&lt;server_IP&gt;/repos/rhel-7-server-ose-3.2-rpms
enabled=1
gpgcheck=0</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-host-preparations"><a class="anchor" href="#disconnected-host-preparations"></a>Host Preparation</h3>
<div class="paragraph">
<p>At this point, the systems are ready to continue to be prepared
<a href="../../install_config/install/prerequisites.html#host-preparation">following
the OpenShift Enterprise documentation</a>.</p>
</div>
<div class="paragraph">
<p>Skip the section titled <strong>Registering the Hosts</strong> and start with <strong>Managing
Packages</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-installing-openshift"><a class="anchor" href="#disconnected-installing-openshift"></a>Installing OpenShift Enterprise</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="disconnected-importing-containerized-components"><a class="anchor" href="#disconnected-importing-containerized-components"></a>Importing OpenShift Enterprise Containerized Components</h3>
<div class="paragraph">
<p>To import the relevant components, securely copy the images from the connected
host to the individual OpenShift Enterprise hosts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp /var/www/html/repos/images/ose3-images.tar root@&lt;openshift_host_name&gt;:
# ssh root@&lt;openshift_host_name&gt; "docker load -i ose3-images.tar"</pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer, you could use <code>wget</code> on each OpenShift Enterprise host to fetch the
tar file, and then perform the Docker import command locally. Perform the same
steps for the metrics and logging images, if you synchronized them.</p>
</div>
<div class="paragraph">
<p>On the host that will act as an OpenShift Enterprise master, copy and import the
builder images:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># scp /var/www/html/images/ose3-builder-images.tar root@&lt;openshift_master_host_name&gt;:
# ssh root@&lt;openshift_master_host_name&gt; "docker load -i ose3-builder-images.tar"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-running-the-openshift-installer"><a class="anchor" href="#disconnected-running-the-openshift-installer"></a>Running the OpenShift Enterprise Installer</h3>
<div class="paragraph">
<p>You can now choose to follow the
<a href="../../install_config/install/quick_install.html#install-config-install-quick-install">quick</a> or
<a href="../../install_config/install/advanced_install.html#install-config-install-advanced-install">advanced</a>
OpenShift Enterprise installation instructions in the documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-creating-the-internal-docker-registry"><a class="anchor" href="#disconnected-creating-the-internal-docker-registry"></a>Creating the Internal Docker Registry</h3>
<div class="paragraph">
<p>You now need to <a href="../../install_config/install/docker_registry.html#install-config-install-docker-registry">create
the internal Docker registry</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-post-installation-changes"><a class="anchor" href="#disconnected-post-installation-changes"></a>Post-Installation Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In one of the previous steps, the S2I images were imported into the Docker
daemon running on one of the OpenShift Enterprise master hosts. In a connected
installation, these images would be pulled from Red Hat’s registry on demand.
Since the Internet is not available to do this, the images must be made
available in another Docker registry.</p>
</div>
<div class="paragraph">
<p>OpenShift Enterprise provides an internal registry for storing the images that are
built as a result of the S2I process, but it can also be used to hold the S2I
builder images. The following steps assume you did not customize the service IP
subnet (172.30.0.0/16) or the Docker registry port (5000).</p>
</div>
<div class="sect2">
<h3 id="disconnected-re-tagging-s2i-builder-images"><a class="anchor" href="#disconnected-re-tagging-s2i-builder-images"></a>Re-tagging S2I Builder Images</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the master host where you imported the S2I builder images, obtain the
service address of your Docker registry that you installed on the master:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># export REGISTRY=$(oc get service docker-registry -t '{{.spec.clusterIP}}{{"\n"}}')</pre>
</div>
</div>
</li>
<li>
<p>Next, tag all of the builder images that you synced and exported before
pushing them into the OpenShift Enterprise Docker registry. For example, if you
synced and exported only the Tomcat image:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker tag \
registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:1.1 \
$REGISTRY:5000/openshift/webserver30-tomcat7-openshift:1.1
# docker tag \
registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:latest \
$REGISTRY:5000/openshift/webserver30-tomcat7-openshift:1.2
# docker tag \
registry.access.redhat.com/jboss-webserver-3/webserver30-tomcat7-openshift:latest \
$REGISTRY:5000/openshift/webserver30-tomcat7-openshift:latest</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-creating-an-admin-user"><a class="anchor" href="#disconnected-creating-an-admin-user"></a>Creating an Administrative User</h3>
<div class="paragraph">
<p>Pushing the Docker images into OpenShift Enterprise&#8217;s Docker registry requires a user
with <strong>cluster-admin</strong> privileges. Because the default OpenShift Enterprise system
administrator does not have a standard authorization token, they cannot be used
to log in to the Docker registry.</p>
</div>
<div class="paragraph">
<p>To create an administrative user:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new user account in the authentication system you are using with
OpenShift Enterprise. For example, if you are using local <code>htpasswd</code>-based
authentication:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># htpasswd -b /etc/openshift/openshift-passwd &lt;admin_username&gt; &lt;password&gt;</pre>
</div>
</div>
</li>
<li>
<p>The external authentication system now has a user account, but a user must log
in to OpenShift Enterprise before an account is created in the internal database. Log
in to OpenShift Enterprise for this account to be created. This assumes you are using
the self-signed certificates generated by OpenShift Enterprise during the
installation:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc login --certificate-authority=/etc/origin/master/ca.crt \
    -u &lt;admin_username&gt; https://&lt;openshift_master_host&gt;:8443</pre>
</div>
</div>
</li>
<li>
<p>Get the user’s authentication token:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># MYTOKEN=$(oc whoami -t)
# echo $MYTOKEN
iwo7hc4XilD2KOLL4V1O55ExH2VlPmLD-W2-JOd6Fko</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-modifying-the-securitry-policies"><a class="anchor" href="#disconnected-modifying-the-securitry-policies"></a>Modifying the Security Policies</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using <code>oc login</code> switches to the new user. Switch back to the OpenShift Enterprise
system administrator in order to make policy changes:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc login -u system:admin</pre>
</div>
</div>
</li>
<li>
<p>In order to push images into the OpenShift Enterprise Docker registry, an account
must have the <code>image-builder</code> security role. Add this to your OpenShift Enterprise
administrative user:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oadm policy add-role-to-user system:image-builder &lt;admin_username&gt;</pre>
</div>
</div>
</li>
<li>
<p>Next, add the administrative role to the user in the <strong>openshift</strong> project. This
allows the administrative user to edit the <strong>openshift</strong> project, and, in this
case, push the Docker images:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oadm policy add-role-to-user admin &lt;admin_username&gt; -n openshift</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-editing-the-image-stream-definitions"><a class="anchor" href="#disconnected-editing-the-image-stream-definitions"></a>Editing the Image Stream Definitions</h3>
<div class="paragraph">
<p>The <strong>openshift</strong> project is where all of the image streams for builder images are
created by the installer. They are loaded by the installer from the
<strong><em>/usr/share/openshift/examples</em></strong> directory. Change all of the definitions by
deleting the image streams which had been loaded into OpenShift Enterprise&#8217;s
database, then re-create them:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the existing image streams:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc delete is -n openshift --all</pre>
</div>
</div>
</li>
<li>
<p>Make a backup of the files in <strong><em>/usr/share/openshift/examples/</em></strong> if you
desire. Next, edit the file <strong><em>image-streams-rhel7.json</em></strong> in the
<strong><em>/usr/share/openshift/examples/image-streams</em></strong> folder. You will find an image
stream section for each of the builder images. Edit the <code><strong>spec</strong></code> stanza to point
to your internal Docker registry.</p>
<div class="paragraph">
<p>For example, change:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">"spec": {
  "dockerImageRepository": "registry.access.redhat.com/rhscl/mongodb-26-rhel7",</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">"spec": {
  "dockerImageRepository": "172.30.69.44:5000/openshift/mongodb-26-rhel7",</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the above, the repository name was changed from <strong>rhscl</strong> to <strong>openshift</strong>. You
will need to ensure the change, regardless of whether the repository is <strong>rhscl</strong>,
<strong>openshift3</strong>, or another directory. Every definition should have the following
format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&lt;registry_ip&gt;:5000/openshift/&lt;image_name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this change for every image stream in the file. Ensure you use the
correct IP address that you determined earlier. When you are finished, save and
exit. Repeat the same process for the JBoss image streams in the
<strong><em>/usr/share/openshift/examples/xpaas-streams/jboss-image-streams.json</em></strong> file.</p>
</div>
</li>
<li>
<p>Load the updated image stream definitions:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc create -f /usr/share/openshift/examples/image-streams/image-streams-rhel7.json -n openshift
# oc create -f /usr/share/openshift/examples/xpaas-streams/jboss-image-streams.json -n openshift</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="disconnected-loading-the-docker-images"><a class="anchor" href="#disconnected-loading-the-docker-images"></a>Loading the Docker Images</h3>
<div class="paragraph">
<p>At this point the system is ready to load the Docker images.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the Docker registry using the token and registry service IP obtained
earlier:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker login -u adminuser -e mailto:adminuser@abc.com \
   -p $MYTOKEN $REGISTRY:5000</pre>
</div>
</div>
</li>
<li>
<p>Push the Docker images:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># docker push $REGISTRY:5000/openshift/webserver30-tomcat7-openshift:1.1
# docker push $REGISTRY:5000/openshift/webserver30-tomcat7-openshift:1.2
# docker push $REGISTRY:5000/openshift/webserver30-tomcat7-openshift:latest</pre>
</div>
</div>
</li>
<li>
<p>Verify that all the image streams now have the tags populated:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc get imagestreams -n openshift
NAME                                 DOCKER REPO                                                      TAGS                                     UPDATED
jboss-webserver30-tomcat7-openshift  $REGISTRY/jboss-webserver-3/webserver30-jboss-tomcat7-openshift  1.1,1.1-2,1.1-6 + 2 more...              2 weeks ago
...</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disconnected-installing-a-router"><a class="anchor" href="#disconnected-installing-a-router"></a>Installing a Router</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point, the OpenShift Enterprise environment is almost ready for use. It is
likely that you will want to
<a href="../../install_config/install/deploy_router.html#install-config-install-deploy-router">install and configure a
router</a>.</p>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
    <footer class="footer-openshift">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-4 col-md-3">
        <a href="https://www.redhat.com/"></a>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-6 text-center">
        <div class="row">
          <div class="col-xs-12 col-md-4">
          </div>
          <div class="col-xs-12 col-md-4">
          </div>
          <div class="col-xs-12 col-md-4">
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3 text-right">
        <a id="built_with_asciibinder" href="http://asciibinder.org/">
          <img src="../../../master/_images/asciibinder_web_logo.svg" alt="AsciiBinder" />
        </a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>