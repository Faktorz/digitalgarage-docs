<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>OpenShift Origin | Installation and Configuration | Aggregate Logging Sizing Guidelines</title>
  <link href="/_stylesheets/subdomain.css" rel="stylesheet" type="text/css">
  <link href="/_stylesheets/docs.css" rel="stylesheet" type="text/css"/>
  <link href="/_stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <!--
  <link href="https://raw.githubusercontent.com/thedigitalgarage/origin-web-console/master/extensions/thedigitalgarage/css/main.css" rel="stylesheet" type="text/css">
  -->
  <link href="/_images/favicon.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="/_images/favicon.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="the Digital Garage" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/app/assets/site/tracking.js" type="text/javascript"></script>
  <script type="text/javascript" src="https://assets.openshift.net/app/assets/site/tracking.js"></script>
</head>
<body>
  <div class="navbar navbar-default navbar-openshift" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand" href="/"></a>
  </div>
  <div class="navbar-collapse collapse">
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">OpenShift Origin Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../install_config/index.html">Installation and Configuration</a>
      </li>
      
      <li class="hidden-xs active">
        Aggregate Logging Sizing Guidelines
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          
<script>
  (function() {
    var cx = '013769182564158614814:vdyz7waqya4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>What's New?
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../whats_new/index.html">Overview</a></li>
            <li><a class="" href="../whats_new/applications.html">Applications</a></li>
            <li><a class="" href="../whats_new/carts_vs_images.html">Cartridges vs Images</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../getting_started/developers_cli.html">Command-Line Walkthrough</a></li>
            <li><a class="" href="../getting_started/administrators.html">Setting Up a Cluster</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-1">
                <span id="sgSpan-3-1" class="fa fa-caret-right"></span>&nbsp;Infrastructure Components
              </a>
              <ul id="topicSubGroup-3-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/infrastructure_components/kubernetes_infrastructure.html">Kubernetes Infrastructure</a></li>

                  <li><a class="" href="../architecture/infrastructure_components/image_registry.html">Image Registry</a></li>

                  <li><a class="" href="../architecture/infrastructure_components/web_console.html">Web Console</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-2">
                <span id="sgSpan-3-2" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-3-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/core_concepts/index.html">Overview</a></li>

                  <li><a class="" href="../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>

                  <li><a class="" href="../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>

                  <li><a class="" href="../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>

                  <li><a class="" href="../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>

                  <li><a class="" href="../architecture/core_concepts/deployments.html">Deployments</a></li>

                  <li><a class="" href="../architecture/core_concepts/routes.html">Routes</a></li>

                  <li><a class="" href="../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-3">
                <span id="sgSpan-3-3" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-3-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/additional_concepts/networking.html">Networking</a></li>

                  <li><a class="" href="../architecture/additional_concepts/sdn.html">OpenShift SDN</a></li>

                  <li><a class="" href="../architecture/additional_concepts/authentication.html">Authentication</a></li>

                  <li><a class="" href="../architecture/additional_concepts/authorization.html">Authorization</a></li>

                  <li><a class="" href="../architecture/additional_concepts/storage.html">Persistent Storage</a></li>

                  <li><a class="" href="../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>

                  <li><a class="" href="../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>

                  <li><a class="" href="../architecture/additional_concepts/throttling.html">Throttling</a></li>

                  <li><a class="" href="../architecture/additional_concepts/scm.html">Source Control Management</a></li>

                  <li><a class="" href="../architecture/additional_concepts/admission_controllers.html">Admission Controllers</a></li>

                  <li><a class="" href="../architecture/additional_concepts/other_api_objects.html">Other API Objects</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Installation and Configuration
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../install_config/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-1">
                <span id="sgSpan-4-1" class="fa fa-caret-right"></span>&nbsp;Installing a Cluster
              </a>
              <ul id="topicSubGroup-4-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/install/planning.html">Planning</a></li>

                  <li><a class="" href="../install_config/install/prerequisites.html">Prerequisites</a></li>

                  <li><a class="" href="../install_config/install/host_preparation.html">Host Preparation</a></li>

                  <li><a class="" href="../install_config/install/rpm_vs_containerized.html">Containerized Components</a></li>

                  <li><a class="" href="../install_config/install/quick_install.html">Quick Installation</a></li>

                  <li><a class="" href="../install_config/install/advanced_install.html">Advanced Installation</a></li>

                  <li><a class="" href="../install_config/install/stand_alone_registry.html">Installing a Stand-alone Registry</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-2">
                <span id="sgSpan-4-2" class="fa fa-caret-right"></span>&nbsp;Setting up the Registry
              </a>
              <ul id="topicSubGroup-4-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/registry/index.html">Registry Overview</a></li>

                  <li><a class="" href="../install_config/registry/deploy_registry_existing_clusters.html">Deploying a Registry on Existing Clusters</a></li>

                  <li><a class="" href="../install_config/registry/accessing_registry.html">Accessing the Registry</a></li>

                  <li><a class="" href="../install_config/registry/securing_and_exposing_registry.html">Securing and Exposing the Registry</a></li>

                  <li><a class="" href="../install_config/registry/extended_registry_configuration.html">Extended Registry Configuration</a></li>

                  <li><a class="" href="../install_config/registry/registry_known_issues.html">Known Issues</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-3">
                <span id="sgSpan-4-3" class="fa fa-caret-right"></span>&nbsp;Setting up a Router
              </a>
              <ul id="topicSubGroup-4-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/router/index.html">Router Overview</a></li>

                  <li><a class="" href="../install_config/router/default_haproxy_router.html">Using the Default HAProxy Router</a></li>

                  <li><a class="" href="../install_config/router/customized_haproxy_router.html">Deploying a Customized HAProxy Router</a></li>

                  <li><a class="" href="../install_config/router/f5_router.html">Using the F5 Router Plug-in</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-4">
                <span id="sgSpan-4-4" class="fa fa-caret-right"></span>&nbsp;Upgrading a Cluster
              </a>
              <ul id="topicSubGroup-4-4" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/upgrading/index.html">Overview</a></li>

                  <li><a class="" href="../install_config/upgrading/automated_upgrades.html">Automated In-place Upgrades</a></li>

                  <li><a class="" href="../install_config/upgrading/manual_upgrades.html">Manual In-place Upgrades</a></li>

                  <li><a class="" href="../install_config/upgrading/blue_green_deployments.html">Blue-Green Deployments</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/master_node_configuration.html">Master and Node Configuration</a></li>
            <li><a class="" href="../install_config/adding_hosts_to_existing_cluster.html">Adding Hosts to an Existing Cluster</a></li>
            <li><a class="" href="../install_config/imagestreams_templates.html">Loading the Default Image Streams and Templates</a></li>
            <li><a class="" href="../install_config/certificate_customization.html">Configuring Custom Certificates</a></li>
            <li><a class="" href="../install_config/redeploying_certificates.html">Redeploying Certificates</a></li>
            <li><a class="" href="../install_config/configuring_authentication.html">Configuring Authentication and User Agent</a></li>
            <li><a class="" href="../install_config/syncing_groups_with_ldap.html">Syncing Groups With LDAP</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-12">
                <span id="sgSpan-4-12" class="fa fa-caret-right"></span>&nbsp;Advanced LDAP Configuration
              </a>
              <ul id="topicSubGroup-4-12" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/advanced_ldap_configuration/index.html">Overview</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/sssd_for_ldap_failover.html">Setting up SSSD for LDAP Failover</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_form_based_authentication.html">Configuring Form-Based Authentication</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_extended_ldap_attributes.html">Configuring Extended LDAP Attributes</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/configuring_sdn.html">Configuring the SDN</a></li>
            <li><a class="" href="../install_config/configuring_aws.html">Configuring for AWS</a></li>
            <li><a class="" href="../install_config/configuring_openstack.html">Configuring for OpenStack</a></li>
            <li><a class="" href="../install_config/configuring_gce.html">Configuring for GCE</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-17">
                <span id="sgSpan-4-17" class="fa fa-caret-right"></span>&nbsp;Configuring Persistent Storage
              </a>
              <ul id="topicSubGroup-4-17" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/persistent_storage/index.html">Overview</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_nfs.html">Using NFS</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_glusterfs.html">Using GlusterFS</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_cinder.html">Using OpenStack Cinder</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_ceph_rbd.html">Using Ceph RBD</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_aws.html">Using AWS Elastic Block Store</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_gce.html">Using GCE Persistent Disk</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_iscsi.html">Using iSCSI</a></li>

                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_fibre_channel.html">Using Fibre Channel</a></li>

                  <li><a class="" href="../install_config/persistent_storage/dynamically_provisioning_pvs.html">Dynamic Provisioning</a></li>

                  <li><a class="" href="../install_config/persistent_storage/pod_security_context.html">Volume Security</a></li>

                  <li><a class="" href="../install_config/persistent_storage/selector_label_binding.html">Selector-Label Volume Binding</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-18">
                <span id="sgSpan-4-18" class="fa fa-caret-right"></span>&nbsp;Persistent Storage Examples
              </a>
              <ul id="topicSubGroup-4-18" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/storage_examples/index.html">Overview</a></li>

                  <li><a class="" href="../install_config/storage_examples/shared_storage.html">Sharing an NFS PV Across Two Pods</a></li>

                  <li><a class="" href="../install_config/storage_examples/ceph_example.html">Complete Example Using Ceph RBD</a></li>

                  <li><a class="" href="../install_config/storage_examples/gluster_example.html">Complete Example Using GlusterFS</a></li>

                  <li><a class="" href="../install_config/storage_examples/privileged_pod_storage.html">Mounting Volumes To Privileged Pods</a></li>

                  <li><a class="" href="../install_config/storage_examples/gluster_backed_registry.html">Backing Docker Registry with GlusterFS Storage</a></li>

                  <li><a class="" href="../install_config/storage_examples/binding_pv_by_label.html">Binding Persistent Volumes by Label</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/http_proxies.html">Working with HTTP Proxies</a></li>
            <li><a class="" href="../install_config/build_defaults_overrides.html">Configuring Global Build Defaults and Overrides</a></li>
            <li><a class="" href="../install_config/configuring_pipeline_execution.html">Configuring Build Pipeline Execution</a></li>
            <li><a class="" href="../install_config/configuring_routing.html">Configuring Routing</a></li>
            <li><a class="" href="../install_config/routing_from_edge_lb.html">Routing from Edge Load Balancers</a></li>
            <li><a class="" href="../install_config/aggregate_logging.html">Aggregating Container Logs</a></li>
            <li><a class=" active" href="../install_config/aggregate_logging_sizing.html">Aggregate Logging Sizing Guidelines</a></li>
            <li><a class="" href="../install_config/cluster_metrics.html">Enabling Cluster Metrics</a></li>
            <li><a class="" href="../install_config/web_console_customization.html">Customizing the Web Console</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Cluster Administration
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../admin_guide/index.html">Overview</a></li>
            <li><a class="" href="../admin_guide/manage_nodes.html">Managing Nodes</a></li>
            <li><a class="" href="../admin_guide/manage_users.html">Managing Users</a></li>
            <li><a class="" href="../admin_guide/managing_projects.html">Managing Projects</a></li>
            <li><a class="" href="../admin_guide/managing_pods.html">Managing Pods</a></li>
            <li><a class="" href="../admin_guide/service_accounts.html">Configuring Service Accounts</a></li>
            <li><a class="" href="../admin_guide/manage_authorization_policy.html">Managing Authorization Policies</a></li>
            <li><a class="" href="../admin_guide/image_policy.html">Image Policy</a></li>
            <li><a class="" href="../admin_guide/monitoring_images.html">Monitoring Images</a></li>
            <li><a class="" href="../admin_guide/manage_scc.html">Managing Security Context Constraints</a></li>
            <li><a class="" href="../admin_guide/quota.html">Setting Quotas</a></li>
            <li><a class="" href="../admin_guide/multiproject_quota.html">Setting Multi-Project Quotas</a></li>
            <li><a class="" href="../admin_guide/limits.html">Setting Limit Ranges</a></li>
            <li><a class="" href="../admin_guide/pruning_resources.html">Pruning Objects</a></li>
            <li><a class="" href="../admin_guide/garbage_collection.html">Garbage Collection</a></li>
            <li><a class="" href="../admin_guide/scheduler.html">Scheduler</a></li>
            <li><a class="" href="../admin_guide/allocating_node_resources.html">Allocating Node Resources</a></li>
            <li><a class="" href="../admin_guide/overcommit.html">Overcommitting</a></li>
            <li><a class="" href="../admin_guide/tcp_ingress_external_ports.html">Assigning Unique External IPs for Ingress Traffic</a></li>
            <li><a class="" href="../admin_guide/router.html">Monitoring Routers</a></li>
            <li><a class="" href="../admin_guide/high_availability.html">High Availability</a></li>
            <li><a class="" href="../admin_guide/iptables.html">IPtables</a></li>
            <li><a class="" href="../admin_guide/securing_builds.html">Securing Builds by Strategy</a></li>
            <li><a class="" href="../admin_guide/building_dependency_trees.html">Building Dependency Trees</a></li>
            <li><a class="" href="../admin_guide/backup_restore.html">Backup and Restore</a></li>
            <li><a class="" href="../admin_guide/sdn_troubleshooting.html">Troubleshooting Networking</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
            <li><a class="" href="../cli_reference/basic_cli_operations.html">Developer CLI Operations</a></li>
            <li><a class="" href="../cli_reference/admin_cli_operations.html">Administrator CLI Operations</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Developer Guide
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-7-5">
                <span id="sgSpan-7-5" class="fa fa-caret-right"></span>&nbsp;Migrating Applications
              </a>
              <ul id="topicSubGroup-7-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../dev_guide/migrating_applications/index.html">Overview</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/database_applications.html">Database Applications</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/web_framework_applications.html">Web Framework Applications</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/quickstart_examples.html">QuickStart Examples</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/continuous_integration_and_deployment.html">Continuous Integration and Deployment</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/web_hooks_action_hooks.html">Webhooks and Action Hooks</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/S2I_tool.html">S2I Tool</a></li>

                  <li><a class="" href="../dev_guide/migrating_applications/support_guide.html">Support Guide</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-7-6">
                <span id="sgSpan-7-6" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-7-6" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../dev_guide/app_tutorials/index.html">Overview</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>

                  <li><a class="" href="../dev_guide/app_tutorials/maven_tutorial.html">Setting Up a Nexus Mirror</a></li>
              </ul>
            </li>
            <li><a class="" href="../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../dev_guide/getting_traffic_into_cluster.html">Getting Traffic Into The Cluster</a></li>
            <li><a class="" href="../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../dev_guide/secrets.html">Secrets</a></li>
            <li><a class="" href="../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../dev_guide/daemonsets.html">Using Daemonsets</a></li>
            <li><a class="" href="../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../dev_guide/jobs.html">Jobs</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8">
        <span id="tgSpan8" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../creating_images/custom.html">Custom Builder</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9">
        <span id="tgSpan9" class="fa fa-angle-right"></span>Using Images
      </a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-0">
                <span id="sgSpan-9-0" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-9-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/s2i_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/s2i_images/customizing_s2i_images.html">Customizing S2I images</a></li>

                  <li><a class="" href="../using_images/s2i_images/nodejs.html">Node.js</a></li>

                  <li><a class="" href="../using_images/s2i_images/ruby.html">Ruby</a></li>

                  <li><a class="" href="../using_images/s2i_images/perl.html">Perl</a></li>

                  <li><a class="" href="../using_images/s2i_images/php.html">PHP</a></li>

                  <li><a class="" href="../using_images/s2i_images/python.html">Python</a></li>

                  <li><a class="" href="../using_images/s2i_images/java.html">Java</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-1">
                <span id="sgSpan-9-1" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-9-1" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/db_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/db_images/mysql.html">MySQL</a></li>

                  <li><a class="" href="../using_images/db_images/postgresql.html">PostgreSQL</a></li>

                  <li><a class="" href="../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-2">
                <span id="sgSpan-9-2" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-9-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-3">
                <span id="sgSpan-9-3" class="fa fa-caret-right"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-9-3" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../using_images/other_images/index.html">Overview</a></li>

                  <li><a class="" href="../using_images/other_images/jenkins.html">Jenkins</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10">
        <span id="tgSpan10" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Aggregate Logging Sizing Guidelines</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#install-config-aggregate-logging-sizing-guidelines-installation">Installation</a></li>
<li><a href="#install-config-aggregate-logging-sizing-guidelines-rate-limiting">Systemd-journald and rsyslog</a></li>
<li><a href="#install-config-aggregate-logging-sizing-guidelines-scaling-up">Scaling up EFK Logging</a></li>
<li><a href="#install-config-aggregate-logging-sizing-guidelines-storage">Storage Considerations</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="../install_config/aggregate_logging.html#install-config-aggregate-logging">Elasticsearch,
Fluentd, and Kibana</a> (EFK) stack aggregates logs from nodes and applications
running inside your OpenShift Origin installation. Once deployed it uses
<a href="http://www.fluentd.org/architecture">Fluentd</a> to aggregate event logs from
all nodes, projects, and pods into
<a href="https://www.elastic.co/products/elasticsearch">Elasticsearch (ES)</a>. It also
provides a centralized
<a href="https://www.elastic.co/guide/en/kibana/current/introduction.html">Kibana</a>
web UI where users and administrators can create rich visualizations and
dashboards with the aggregated data.</p>
</div>
<div class="paragraph">
<p>Fluentd
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html">bulk
uploads</a> logs to an index, in JSON format, then Elasticsearch routes your search
requests to the appropriate shards.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-config-aggregate-logging-sizing-guidelines-installation"><a class="anchor" href="#install-config-aggregate-logging-sizing-guidelines-installation"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The general procedure for installing an aggregate logging stack in
OpenShift Origin is described in
<a href="../install_config/aggregate_logging.html#install-config-aggregate-logging">Aggregating
Container Logs</a>. There are some important things to keep in mind while going
through the installation guide:</p>
</div>
<div class="paragraph">
<p>In order for the logging pods to spread evenly across your cluster, an empty
<a href="../admin_guide/managing_projects.html#using-node-selectors">node selector</a>
should be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oadm new-project logging --node-selector=""</pre>
</div>
</div>
<div class="paragraph">
<p>In conjunction with node labeling, which is done later, this controls pod
placement across the logging project.  You can now create the logging project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc project logging</pre>
</div>
</div>
<div class="paragraph">
<p>If you are installing in a PoC or testing environment, a local openshift-ansible
template install is recommended.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc create -f ${OPENSHIFT_ANSIBLE_REPO}/roles/openshift_examples/files/examples/${VERSION}/infrastructure-templates/origin/logging-deployer.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Elasticsearch (ES) should be deployed with a cluster size of at least three for
resiliency to node failures. This is specified by passing the
<code><strong>ES_CLUSTER_SIZE</strong></code> parameter to the installer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc new-app logging-deployer-template \
                        --param ES_CLUSTER_SIZE=3 \
                        --param PUBLIC_MASTER_URL=$PUBLIC_MASTER_URL \
                        --param KIBANA_HOSTNAME=$KIBANA_URL</pre>
</div>
</div>
<div class="paragraph">
<p>Refer to
<a href="../install_config/aggregate_logging.html#deploying-the-efk-stack">Deploying
the EFK Stack</a> for a full list of parameters.</p>
</div>
<div class="paragraph">
<p>If you do not have an existing Kibana installation, you can use
<strong>kibana.example.com</strong> as a value to <code><strong>KIBANA_HOSTNAME</strong></code>.</p>
</div>
<div class="paragraph">
<p>Now, ensure Fluentd pod spreading through labeling.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc label nodes --all logging-infra-fluentd=true</pre>
</div>
</div>
<div class="paragraph">
<p>This operation requires the <code>cluster-admin</code> default role.</p>
</div>
<div class="paragraph">
<p>Installation can take some time depending on whether the images were already
retrieved from the registry or not, and on the size of your cluster.</p>
</div>
<div class="paragraph">
<p>Inside the <strong>logging</strong> namespace, you can check your deployment with <code>oc get all</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get all

NAME                          REVISION                 REPLICAS      TRIGGERED BY
logging-curator               1                        1
logging-es-6cvk237t           1                        1
logging-es-e5x4t4ai           1                        1
logging-es-xmwvnorv           1                        1
logging-kibana                1                        1
NAME                          DESIRED                  CURRENT       AGE
logging-curator-1             1                        1             3d
logging-es-6cvk237t-1         1                        1             3d
logging-es-e5x4t4ai-1         1                        1             3d
logging-es-xmwvnorv-1         1                        1             3d
logging-kibana-1              1                        1             3d
NAME                          HOST/PORT                PATH          SERVICE              TERMINATION   LABELS
logging-kibana                kibana.example.com                     logging-kibana       reencrypt     component=support,logging-infra=support,provider=openshift
logging-kibana-ops            kibana-ops.example.com                 logging-kibana-ops   reencrypt     component=support,logging-infra=support,provider=openshift
NAME                          CLUSTER-IP               EXTERNAL-IP   PORT(S)              AGE
logging-es                    172.24.155.177           &lt;none&gt;        9200/TCP             3d
logging-es-cluster            None                     &lt;none&gt;        9300/TCP             3d
logging-es-ops                172.27.197.57            &lt;none&gt;        9200/TCP             3d
logging-es-ops-cluster        None                     &lt;none&gt;        9300/TCP             3d
logging-kibana                172.27.224.55            &lt;none&gt;        443/TCP              3d
logging-kibana-ops            172.25.117.77            &lt;none&gt;        443/TCP              3d
NAME                          READY                    STATUS        RESTARTS             AGE
logging-curator-1-6s7wy       1/1                      Running       0                    3d
logging-deployer-un6ut        0/1                      Completed     0                    3d
logging-es-6cvk237t-1-cnpw3   1/1                      Running       0                    3d
logging-es-e5x4t4ai-1-v933h   1/1                      Running       0                    3d
logging-es-xmwvnorv-1-adr5x   1/1                      Running       0                    3d
logging-fluentd-156xn         1/1                      Running       0                    3d
logging-fluentd-40biz         1/1                      Running       0                    3d
logging-fluentd-7dtom         0/1                      Pending       0                    2d
logging-fluentd-8k847         1/1                      Running       0                    3d</pre>
</div>
</div>
<div class="paragraph">
<p>You should end up with a similar setup to the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc get pods -o wide

NAME                          READY     STATUS      RESTARTS   AGE       NODE
logging-curator-1-6s7wy       1/1       Running     0          3d        ip-172-31-24-239.us-west-2.compute.internal
logging-deployer-un6ut        0/1       Completed   0          3d        ip-172-31-6-152.us-west-2.compute.internal
logging-es-6cvk237t-1-cnpw3   1/1       Running     0          3d        ip-172-31-24-238.us-west-2.compute.internal
logging-es-e5x4t4ai-1-v933h   1/1       Running     0          3d        ip-172-31-24-235.us-west-2.compute.internal
logging-es-xmwvnorv-1-adr5x   1/1       Running     0          3d        ip-172-31-24-233.us-west-2.compute.internal
logging-fluentd-156xn         1/1       Running     0          3d        ip-172-31-24-241.us-west-2.compute.internal
logging-fluentd-40biz         1/1       Running     0          3d        ip-172-31-24-236.us-west-2.compute.internal
logging-fluentd-7dtom         0/1       Pending     0          2d        ip-172-31-24-243.us-west-2.compute.internal
logging-fluentd-8k847         1/1       Running     0          3d        ip-172-31-24-237.us-west-2.compute.internal
logging-fluentd-9a3qx         1/1       Running     0          3d        ip-172-31-24-231.us-west-2.compute.internal
logging-fluentd-abvgj         1/1       Running     0          3d        ip-172-31-24-228.us-west-2.compute.internal
logging-fluentd-bh74n         1/1       Running     0          3d        ip-172-31-24-238.us-west-2.compute.internal
...
...</pre>
</div>
</div>
<div class="paragraph">
<p>Notice how the pods are placed in different cluster nodes.</p>
</div>
<div class="paragraph">
<p>By default the amount of RAM allocated to each ES instance is 8GB.
<code><strong>ES_INSTANCE_RAM</strong></code> is the parameter used in the <strong>openshift-ansible</strong>
<a href="https://github.com/openshift/openshift-ansible/blob/master/roles/openshift_examples/files/examples/v1.3/infrastructure-templates/enterprise/logging-deployer.yaml">template</a>.
Keep in mind that <strong>half</strong> of this value will be passed to the individual
elasticsearch pods java processes
<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html#_give_half_your_memory_to_lucene">heap
size</a>.</p>
</div>
<div class="paragraph">
<p><a href="../install_config/aggregate_logging.html#install-config-aggregate-logging">Learn more about installing EFK</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-config-aggregate-logging-sizing-guidelines-rate-limiting"><a class="anchor" href="#install-config-aggregate-logging-sizing-guidelines-rate-limiting"></a>Systemd-journald and rsyslog</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Rate-limiting</strong></p>
</div>
<div class="paragraph">
<p>In Red Hat Enterprise Linux (RHEL) 7 the <strong>systemd-journald.socket</strong> unit creates
<strong><em>/dev/log</em></strong> during the boot process, and then passes input to
<strong>systemd-journald.service</strong>. Every <strong>syslog()</strong> call goes to the journal.</p>
</div>
<div class="paragraph">
<p>Rsyslog uses the <strong>imjournal</strong> module as a default input mode for journal files.
Refer to
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html-single/System_Administrators_Guide/index.html#s1-interaction_of_rsyslog_and_journal">Interaction
of rsyslog and journal</a> for detailed information about this topic.</p>
</div>
<div class="paragraph">
<p>A simple test harness was developed, which uses
<a href="http://linux.die.net/man/1/logger">logger</a> across the cluster nodes to make
entries of different sizes at different rates in the system log. During testing
simulations under a default Red Hat Enterprise Linux (RHEL) 7 installation with
<code>systemd-219-19.el7.x86_64</code> at certain logging rates (approximately 40 log lines
per second), we encountered the default rate limit of <code>rsyslogd</code>. After
adjusting these limits, entries stopped being written to journald due to local
journal file corruption.
<a href="https://rhn.redhat.com/errata/RHBA-2016-1026.html">This issue is resolved in
later versions of systemd</a>.</p>
</div>
<div class="paragraph">
<p><strong>Scaling up</strong></p>
</div>
<div class="paragraph">
<p>As you scale up your project, the default logging environment might need some
adjustments. After updating to <strong>systemd-219-22.el7.x86_64</strong>, we added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$IMUXSockRateLimitInterval 0
$IMJournalRatelimitInterval 0</pre>
</div>
</div>
<div class="paragraph">
<p>to <strong><em>/etc/rsyslog.conf</em></strong> and:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># Disable rate limiting
RateLimitInterval=1s
RateLimitBurst=10000
Storage=volatile
Compress=no
MaxRetentionSec=5s</pre>
</div>
</div>
<div class="paragraph">
<p>to <strong><em>/etc/systemd/journald.conf</em></strong>.</p>
</div>
<div class="paragraph">
<p>Now, restart the services.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ systemctl restart systemd-journald.service
$ systemctl restart rsyslog.service</pre>
</div>
</div>
<div class="paragraph">
<p>These settings account for the bursty nature of uploading in bulk.</p>
</div>
<div class="paragraph">
<p>After removing the rate limit, you may see increased CPU utilization on the
system logging daemons as it processes any messages that would have previously
been throttled.</p>
</div>
<div class="paragraph">
<p>Rsyslog is configured (see <strong>ratelimit.interval</strong>, <strong>ratelimit.burst</strong>) to
rate-limit entries read from the journal at 10,000 messages in 300 seconds. A
good rule of thumb is to ensure that the rsyslog rate-limits account for the
systemd-journald rate-limits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-config-aggregate-logging-sizing-guidelines-scaling-up"><a class="anchor" href="#install-config-aggregate-logging-sizing-guidelines-scaling-up"></a>Scaling up EFK Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you do not indicate the desired scale at first deployment, the least
disruptive way of adjusting your cluster is by re-running the deployer with the
updated <code><strong>ES_CLUSTER_SIZE</strong></code> value and using the <code><strong>MODE=reinstall</strong></code> template
parameter. Refer to the
<a href="../install_config/aggregate_logging.html#aggregate-logging-performing-elasticsearch-maintenance-operations">Performing
Administrative Elasticsearch Operations</a> section for more in-depth information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oc edit configmap logging-deployer
  [change es-cluster-size value to 5]

$ oc new-app logging-deployer-template --param MODE=reinstall</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-config-aggregate-logging-sizing-guidelines-storage"><a class="anchor" href="#install-config-aggregate-logging-sizing-guidelines-storage"></a>Storage Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An Elasticsearch index is a collection of shards and its corresponding replica
shards. This is how ES implements high availability internally, therefore there
is little need to use hardware based mirroring RAID variants. RAID 0 can still
be used to increase overall disk performance.</p>
</div>
<div class="paragraph">
<p>Every search request needs to hit a copy of every shard in the index. Each ES
instance requires its own individual storage, but an OpenShift Origin deployment
can only provide volumes shared by all of its pods, which again means that
Elasticsearch shouldn&#8217;t be implemented with a single node.</p>
</div>
<div class="paragraph">
<p>A
<a href="../install_config/persistent_storage/index.html#install-config-persistent-storage-index">persistent
volume</a> should be added to each Elasticsearch deployment configuration so that
we have one volume per
<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/replica-shards.html">replica
shard</a>. On OpenShift Origin this is often achieved through
<a href="../architecture/additional_concepts/storage.html#persistent-volume-claims">Persistent
Volume Claims</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>1 volume per shard</p>
</li>
<li>
<p>1 volume per replica shard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The PVCs must be named based on the <strong>es-pvc-prefix</strong> setting. Refer to
<a href="../install_config/aggregate_logging.html#aggregated-logging-persistent-storage">Persistent Elasticsearch Storage</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Below are capacity planning guidelines for OpenShift Origin aggregate logging.
<strong>Example scenario</strong></p>
</div>
<div class="paragraph">
<p>Assumptions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Which application: Apache</p>
</li>
<li>
<p>Bytes per line: 256</p>
</li>
<li>
<p>Lines per second load on application: 1</p>
</li>
<li>
<p>Raw text data &#8594; JSON</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Baseline (256 characters per minute &#8594; 15KB/min)</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Logging Infra Pods</th>
<th class="tableblock halign-left valign-top">Storage Throughput</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 es
1 kibana
1 curator
1 fluentd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 pods total: 90000 x 86400 = 7,7 GB/day</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 es
1 kibana
1 curator
11 fluentd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 pods total: 225000 x 86400 = 24,0 GB/day</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 es
1 kibana
1 curator
20 fluentd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 pods total: 225000 x 86400 = 32,4 GB/day</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Calculating total logging throughput and disk space required for your logging
environment requires knowledge of your application. For example, if one of your
applications on average logs 10 lines-per-second, each 256 bytes-per-line,
calculate per-application throughput and disk space as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"> (bytes-per-line * (lines-per-second) = 2560 bytes per app per second
 (2560) * (number-of-pods-per-node,100) = 256,000 bytes per second per node
 256k * (number-of-nodes) = total logging throughput per cluster</pre>
</div>
</div>
<div class="paragraph">
<p>Fluentd ships any logs from <strong><em>/var/log/messages</em></strong> and
<strong><em>/var/lib/docker/containers/</em></strong> to Elasticsearch.
<a href="../install_config/install/host_preparation.html#managing-docker-container-logs">Learn more</a>.</p>
</div>
<div class="paragraph">
<p>Local SSD drives are recommended in order to achieve the best performance. In
Red Hat Enterprise Linux (RHEL) 7, the
<a href="https://access.redhat.com/articles/425823">deadline</a> IO scheduler is the
default for all block devices except SATA disks. For SATA disks, the default IO
scheduler is <strong>cfq</strong>.</p>
</div>
<div class="paragraph">
<p>Sizing storage for ES is greatly dependent on how you optimize your indices.
Therefore, consider how much data you need in advance and that you are
aggregating application log data.</p>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
    <footer class="footer-origin-docs">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div id="footer_social">
          <a href="https://twitter.com/openshift" class="first">
            <span>
              <i class="fa fa-twitter-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://github.com/openshift/origin">
            <span>
              <i class="fa fa-github fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://plus.google.com/communities/114361859072744017486">
            <span>
              <i class="fa fa-google-plus-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://www.facebook.com/openshift">
            <span>
              <i class="fa fa-facebook-square fa-2x fa-inverse"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <a id="footer_logo" href="https://www.redhat.com/">
          <img alt="Red Hat" src="https://assets.openshift.net/app/assets/redhat.svg">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-center">
        <a id="powered_by_openshift" title="Powered by OpenShift Online with the DIY Cartridge" href="https://hub.openshift.com/quickstarts/92-do-it-yourself-0-1">
          <img src="https://www.openshift.com/sites/default/files/images/powered-transparent-white.png" alt="Powered by OpenShift Online">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-right">
        <a id="built_with_asciibinder" title="Built with AsciiBinder docs management system" href="http://asciibinder.org/">
          <img src="../../latest/_images/asciibinder_web_logo.svg" alt="AsciiBinder">
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="attribution">
          <button type="button" class="btn btn-link" data-html="true" data-container="body" data-toggle="popover" data-placement="top" data-content="
            '<a target='_blank' href='https://www.flickr.com/photos/eflon/3655695161/'>Spin</a>' by <a target='_blank' href='https://www.flickr.com/photos/eflon/'>eflon</a>,</br> used under <a target='_blank' href='https://creativecommons.org/licenses/by/2.0/'>CC BY 2.0</a> </br>Color tint added to original">
            Image attribution
          </button>
        </div>
      </div>
    </div>
    <script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })
    </script>
  </div>
</footer>
</body>
</html>