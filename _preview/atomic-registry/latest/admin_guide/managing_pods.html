<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Atomic Registry | Cluster Administration | Managing Pods</title>
  <link href="/_stylesheets/subdomain.css" rel="stylesheet" type="text/css">
  <link href="/_stylesheets/docs.css" rel="stylesheet" type="text/css"/>
  <link href="/_stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <!--
  <link href="https://raw.githubusercontent.com/thedigitalgarage/origin-web-console/master/extensions/thedigitalgarage/css/main.css" rel="stylesheet" type="text/css">
  -->
  <link href="/_images/favicon.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="/_images/favicon.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="Atomic Registry" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/app/assets/site/tracking.js" type="text/javascript"></script>
  <script type="text/javascript" src="https://assets.openshift.net/app/assets/site/tracking.js"></script>
</head>
<body>
  <div class="navbar navbar-default navbar-openshift" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand" href="/"></a>
  </div>
  <div class="navbar-collapse collapse">
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Atomic Registry Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../registry_quickstart/index.html">Atomic Registry Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../admin_guide/index.html">Cluster Administration</a>
      </li>
      
      <li class="hidden-xs active">
        Managing Pods
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          
<script>
  (function() {
    var cx = '013769182564158614814:e-dp46b51vk';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Quickstart
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../registry_quickstart/index.html">Overview</a></li>
            <li><a class="" href="../registry_quickstart/developers.html">Developers</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-0-2">
                <span id="sgSpan-0-2" class="fa fa-caret-right"></span>&nbsp;Administrators
              </a>
              <ul id="topicSubGroup-0-2" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../registry_quickstart/administrators/index.html">Overview</a></li>

                  <li><a class="" href="../registry_quickstart/administrators/system_configuration.html">System Configuration</a></li>

                  <li><a class="" href="../registry_quickstart/administrators/uninstall.html">Uninstall</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-1-0">
                <span id="sgSpan-1-0" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-1-0" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../architecture/core_concepts/containers_and_images.html">Images</a></li>

                  <li><a class="" href="../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>

                  <li><a class="" href="../architecture/core_concepts/builds_and_image_streams.html">Image Streams</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Installation and Configuration
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../install_config/adding_hosts_to_existing_cluster.html">Adding Hosts to an Existing Cluster</a></li>
            <li><a class="" href="../install_config/certificate_customization.html">Configuring Custom Certificates</a></li>
            <li><a class="" href="../install_config/redeploying_certificates.html">Redeploying Certificates</a></li>
            <li><a class="" href="../install_config/configuring_authentication.html">Configuring Authentication and User Agent</a></li>
            <li><a class="" href="../install_config/syncing_groups_with_ldap.html">Syncing Groups With LDAP</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-2-5">
                <span id="sgSpan-2-5" class="fa fa-caret-right"></span>&nbsp;Advanced LDAP Configuration
              </a>
              <ul id="topicSubGroup-2-5" class="nav-tertiary list-unstyled collapse">

                  <li><a class="" href="../install_config/advanced_ldap_configuration/index.html">Overview</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/sssd_for_ldap_failover.html">Setting up SSSD for LDAP Failover</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_form_based_authentication.html">Configuring Form-Based Authentication</a></li>

                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_extended_ldap_attributes.html">Configuring Extended LDAP Attributes</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/web_console_customization.html">Customizing the Web Console</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-down"></span>Cluster Administration
      </a>
      <ul id="topicGroup3" class="collapse in list-unstyled">
            <li><a class="" href="../admin_guide/index.html">Overview</a></li>
            <li><a class="" href="../admin_guide/manage_users.html">Managing Users</a></li>
            <li><a class="" href="../admin_guide/managing_projects.html">Managing Projects</a></li>
            <li><a class=" active" href="../admin_guide/managing_pods.html">Managing Pods</a></li>
            <li><a class="" href="../admin_guide/service_accounts.html">Configuring Service Accounts</a></li>
            <li><a class="" href="../admin_guide/manage_authorization_policy.html">Managing Authorization Policies</a></li>
            <li><a class="" href="../admin_guide/image_policy.html">Image Policy</a></li>
            <li><a class="" href="../admin_guide/quota.html">Setting Quotas</a></li>
            <li><a class="" href="../admin_guide/multiproject_quota.html">Setting Multi-Project Quotas</a></li>
            <li><a class="" href="../admin_guide/limits.html">Setting Limit Ranges</a></li>
            <li><a class="" href="../admin_guide/allocating_node_resources.html">Allocating Node Resources</a></li>
            <li><a class="" href="../admin_guide/tcp_ingress_external_ports.html">Assigning Unique External IPs for Ingress Traffic</a></li>
            <li><a class="" href="../admin_guide/backup_restore.html">Backup and Restore</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>User Guide
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../dev_guide/service_accounts.html">Service Accounts</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Managing Pods</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#admin-guide-pod-network">Managing Pod Networks</a>
<ul class="sectlevel2">
<li><a href="#joining-project-networks">Joining Project Networks</a></li>
</ul>
</li>
<li><a href="#isolating-project-networks">Isolating Project Networks</a>
<ul class="sectlevel2">
<li><a href="#making-project-networks-global">Making Project Networks Global</a></li>
</ul>
</li>
<li><a href="#admin-guide-controlling-egress-traffic">Controlling Egress Traffic</a>
<ul class="sectlevel2">
<li><a href="#admin-guide-limit-pod-access-egress-router">Limiting Pod Access with an Egress Router</a></li>
<li><a href="#admin-guide-limit-pod-access-egress">Limiting Pod Access with Egress Firewall</a></li>
</ul>
</li>
<li><a href="#admin-guide-manage-pods-limit-bandwidth">Limiting the Bandwidth Available to Pods</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This topic describes the management of
<a href="../architecture/core_concepts/pods_and_services.html#pods">pods</a>, including
managing their networks, limiting their run-once duration, and limiting what
they can access, and how much bandwidth they can use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-guide-pod-network"><a class="anchor" href="#admin-guide-pod-network"></a>Managing Pod Networks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When your cluster is configured to use
<a href="../architecture/additional_concepts/sdn.html#architecture-additional-concepts-sdn">the <strong>ovs-multitenant</strong> SDN
plug-in</a>, you can manage the separate pod overlay networks for projects using
the administrator CLI.</p>
</div>
<div class="sect2">
<h3 id="joining-project-networks"><a class="anchor" href="#joining-project-networks"></a>Joining Project Networks</h3>
<div class="paragraph">
<p>To join projects to an existing project network:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oadm pod-network join-projects --to=&lt;project1&gt; &lt;project2&gt; &lt;project3&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, all the pods and services in <code>&lt;project2&gt;</code> and <code>&lt;project3&gt;</code>
can now access any pods and services in <code>&lt;project1&gt;</code> and vice versa.</p>
</div>
<div class="paragraph">
<p>Alternatively, instead of specifying specific project names, you can use the
<code>--selector=&lt;project_selector&gt;</code> option.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="isolating-project-networks"><a class="anchor" href="#isolating-project-networks"></a>Isolating Project Networks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To isolate the project network in the cluster and vice versa, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oadm pod-network isolate-projects &lt;project1&gt; &lt;project2&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, all of the pods and services in <code>&lt;project1&gt;</code> and
<code>&lt;project2&gt;</code> can <em>not</em> access any pods and services from other non-global
projects in the cluster and vice versa.</p>
</div>
<div class="paragraph">
<p>Alternatively, instead of specifying specific project names, you can use the
<code>--selector=&lt;project_selector&gt;</code> option.</p>
</div>
<div class="sect2">
<h3 id="making-project-networks-global"><a class="anchor" href="#making-project-networks-global"></a>Making Project Networks Global</h3>
<div class="paragraph">
<p>To allow projects to access all pods and services in the cluster and vice versa:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ oadm pod-network make-projects-global &lt;project1&gt; &lt;project2&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, all the pods and services in <code>&lt;project1&gt;</code> and <code>&lt;project2&gt;</code>
can now access any pods and services in the cluster and vice versa.</p>
</div>
<div class="paragraph">
<p>Alternatively, instead of specifying specific project names, you can use the
<code>--selector=&lt;project_selector&gt;</code> option.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-guide-controlling-egress-traffic"><a class="anchor" href="#admin-guide-controlling-egress-traffic"></a>Controlling Egress Traffic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an Atomic Registry cluster administrator, you can control egress traffic
using either a <a href="#admin-guide-deploying-an-egress-router-service">router</a> or
<a href="#admin-guide-limit-pod-access-egress">firewall</a> methods.</p>
</div>
<div class="sect2">
<h3 id="admin-guide-limit-pod-access-egress-router"><a class="anchor" href="#admin-guide-limit-pod-access-egress-router"></a>Limiting Pod Access with an Egress Router</h3>
<div class="paragraph">
<p>The Atomic Registry egress router runs a service that redirects traffic to a
specified remote server, using a private source IP address that is not used for
anything else. The service allow pods to talk to servers that are set up
to only allow access from whitelisted IP addresses.</p>
</div>
<div class="sect3">
<h4 id="admin-guide-deploying-an-egress-router-pod"><a class="anchor" href="#admin-guide-deploying-an-egress-router-pod"></a>Deploying an Egress Router Pod</h4>
<div class="exampleblock">
<div class="title">Example 1. Example Pod Definition for an Egress Router</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: v1
kind: Pod
metadata:
  name: egress-1
  labels:
    name: egress-1
  annotations:
    pod.network.openshift.io/assign-macvlan: true
spec:
  containers:
  - name: egress-router
    image: openshift/origin-egress-router
    securityContext:
      privileged: true
    env:
    - name: EGRESS_SOURCE <i class="conum" data-value="1"></i><b>(1)</b>
      value: 192.168.12.99
    - name: EGRESS_GATEWAY <i class="conum" data-value="2"></i><b>(2)</b>
      value: 192.168.12.1
    - name: EGRESS_DESTINATION <i class="conum" data-value="3"></i><b>(3)</b>
      value: 203.0.113.25
  nodeSelector:
    site: springfield-1 <i class="conum" data-value="4"></i><b>(4)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>IP address on the node subnet reserved by the cluster administrator for use by
this pod.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Same value as the default gateway used by the node itself.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Connections to the pod are redirected to 203.0.113.25, with a source IP
address of 192.168.12.99</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The pod will only be deployed to nodes with the label site <strong>springfield-1</strong>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>pod.network.openshift.io/assign-macvlan annotation</code> creates a Macvlan
network interface on the primary network interface, and then moves it into the
pod&#8217;s network name space before starting the <strong>egress-router</strong> container.</p>
</div>
<div class="paragraph">
<p>The pod contains a single container, using the <strong>openshift/origin-egress-router</strong>
image, and that container is run privileged so that it can configure the Macvlan
interface and set up <code>iptables</code> rules.</p>
</div>
<div class="paragraph">
<p>The environment variables tell the <strong>egress-router</strong> image what addresses to use; it
will configure the Macvlan interface to use <code><strong>EGRESS_SOURCE</strong></code> as its IP address,
with <code><strong>EGRESS_GATEWAY</strong></code> as its gateway.</p>
</div>
<div class="paragraph">
<p>NAT rules are set up so that connections to any TCP or UDP port on the
pod&#8217;s cluster IP address are redirected to the same port on
<code><strong>EGRESS_DESTINATION</strong></code>.</p>
</div>
<div class="paragraph">
<p>If only some of the nodes in your cluster are capable of claiming the specified
source IP address and using the specified gateway, you can specify a
<code><strong>nodeName</strong></code> or <code><strong>nodeSelector</strong></code> indicating which nodes are acceptable.</p>
</div>
</div>
<div class="sect3">
<h4 id="admin-guide-deploying-an-egress-router-service"><a class="anchor" href="#admin-guide-deploying-an-egress-router-service"></a>Deploying an Egress Router Service</h4>
<div class="paragraph">
<p>Though not strictly necessary, you normally want to create a service pointing to
the egress router:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: v1
kind: Service
metadata:
  name: egress-1
spec:
  ports:
  - name: http
    port: 80
  - name: https
    port: 443
  type: ClusterIP
  selector:
    name: egress-1</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Your pods can now connect to this service. Their connections are redirected to
the corresponding ports on the external server, using the reserved egress IP
address.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="admin-guide-limit-pod-access-egress"><a class="anchor" href="#admin-guide-limit-pod-access-egress"></a>Limiting Pod Access with Egress Firewall</h3>
<div class="paragraph">
<p>As an Atomic Registry cluster administrator, you can use egress policy to limit
the addresses that some or all pods can access from within the cluster, so that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A pod can only talk to internal hosts, and cannot initiate connections to the
public Internet.</p>
<div class="paragraph">
<p>Or,</p>
</div>
</li>
<li>
<p>A pod can only talk to the public Internet, and cannot initiate connections to
internal hosts (outside the cluster).</p>
<div class="paragraph">
<p>Or,</p>
</div>
</li>
<li>
<p>A pod cannot reach specified internal subnets/hosts that it should have no
reason to contact.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, you can configure projects with different egress policies, allowing
<code>&lt;project A&gt;</code> access to a specified IP range, but denying the same access to
<code>&lt;project B&gt;</code>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must have the
<a href="../install_config/configuring_sdn.html#install-config-configuring-sdn"><strong>ovs-multitenant</strong> plug-in</a> enabled in order to limit pod access via egress policy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Project administrators can neither create <code><strong>EgressNetworkPolicy</strong></code> objects, nor
edit the ones you create in their project.</p>
</div>
<div class="paragraph">
<p>The <code>default</code> project (and any other global namespace) cannot have egress
policy.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you merge two projects together (via <code>oadm pod-network join-projects</code>),
then you cannot use egress policy in <em>any</em> of the joined projects.</p>
</div>
<div class="paragraph">
<p>If you make a project global (via <code>oadm pod-network make-projects-global</code>),
then it cannot have an <code><strong>EgressNetworkPolicy</strong></code>.</p>
</div>
<div class="paragraph">
<p>If an allowed network overlaps with a denied network, then the rules are
checked in order, and the first one that matches is enforced.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="admin-guide-config-pod-access"><a class="anchor" href="#admin-guide-config-pod-access"></a>Configuring Pod Access Limits</h4>
<div class="paragraph">
<p>To configure pod access limits, you must use the <code>oc</code> command or the REST API.
You can use <code>oc [create|replace|delete]</code> to manipulate <code><strong>EgressNetworkPolicy</strong></code>
objects. The <strong><em>api/swagger-spec/oapi-v1.json</em></strong> file has API-level details on how
the objects actually work.</p>
</div>
<div class="paragraph">
<p>To configure pod access limits:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the project you want to affect.</p>
</li>
<li>
<p>Create a JSON file for the pod limit policy:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc create -f &lt;policy&gt;.json</pre>
</div>
</div>
</li>
<li>
<p>Configure the JSON file with policy details. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
    "kind": "EgressNetworkPolicy",
    "apiVersion": "v1",
    "metadata": {
        "name": "default"
    },
    "spec": {
        "egress": [
            {
                "type": "Allow",
                "to": {
                    "cidrSelector": "1.2.3.0/24"
                }
            },
            {
                "type": "Deny",
                "to": {
                    "cidrSelector": "0.0.0.0/32"
                }
            }
        ]
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>When the example above is added in a project, it allows traffic to <code>1.2.3.0/24</code>,
but denies access to all other external IP addresses. This would not affect
traffic to other pods.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-guide-manage-pods-limit-bandwidth"><a class="anchor" href="#admin-guide-manage-pods-limit-bandwidth"></a>Limiting the Bandwidth Available to Pods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can apply quality-of-service traffic shaping to a pod and effectively limit
its available bandwidth. Egress traffic (from the pod) is handled by policing,
which simply drops packets in excess of the configured rate. Ingress traffic (to
the pod) is handled by shaping queued packets to effectively handle data. The
limits you place on a pod do not affect the bandwidth of other pods.</p>
</div>
<div class="paragraph">
<p>To limit the bandwidth on a pod:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Write an object definition JSON file, and specify the data traffic speed using
<code><strong>kubernetes.io/ingress-bandwidth</strong></code> and <code><strong>kubernetes.io/egress-bandwidth</strong></code>
annotations. For example, to limit both pod egress and ingress bandwidth to 10M/s:</p>
<div class="exampleblock">
<div class="title">Example 2. Limited Pod Object Definition</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">{
    "kind": "Pod",
    "spec": {
        "containers": [
            {
                "image": "nginx",
                "name": "nginx"
            }
        ]
    },
    "apiVersion": "v1",
    "metadata": {
        "name": "iperf-slow",
        "annotations": {
            "kubernetes.io/ingress-bandwidth": "10M",
            "kubernetes.io/egress-bandwidth": "10M"
        }
    }
}</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Create the pod using the object definition:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">oc create -f &lt;file_or_dir_path&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
    <footer class="footer-openshift">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-4 col-md-3">
      </div>
      <div class="col-xs-12 col-sm-4 col-md-6 text-center">
        <div class="row">
          <div class="col-xs-12 col-md-4">
          </div>
          <div class="col-xs-12 col-md-4">
          </div>
          <div class="col-xs-12 col-md-4">
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3 text-right">
        <a id="built_with_asciibinder" href="http://asciibinder.org/">
          <img src="http://docs.thedigitalgarage.io/_images/asciibinder_web_logo.svg" alt="AsciiBinder" />
        </a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>